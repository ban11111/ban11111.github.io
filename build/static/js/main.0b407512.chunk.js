(this.webpackJsonpwc=this.webpackJsonpwc||[]).push([[0],{26:function(e,t,a){"use strict";var n,r=a(93),i=a.n(r),o=a(152),c=a(67),l=a(47),s=a(273),u=a.n(s),d=function(){var e={baseURL:"",headers:{"Content-Type":"application/json",Token:sessionStorage.getItem("token")}};return{http:u.a.create(e),down:u.a.create(Object(l.a)({},e,{responseType:"blob"}))}},m=function(){var e=Object(o.a)(i.a.mark((function e(t,a){var n,r,o,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:r=e.sent,o=r.data,c=r.headers,n={success:a?200===r.status:o.success,info:o.info,data:a?o:o.data,headers:c},e.next=17;break;case 8:if(e.prev=8,e.t0=e.catch(0),l=e.t0.response.data,403!==e.t0.response.status){e.next=14;break}return setTimeout((function(){sessionStorage.clear(),window.location.replace("/admin/login")}),2e3),e.abrupt("return",{info:"Your login information is invalid, please login again!",success:!1});case 14:if(400!==e.t0.response.status){e.next=16;break}return e.abrupt("return",{success:l.success,info:l.info,data:l});case 16:n={success:l.success,info:e.t0.response.status+" "+e.t0.response.statusText,data:l};case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),p=function e(t){var a=this;Object(c.a)(this,e),this.request=void 0,this.down=void 0,this.download=Object(o.a)(i.a.mark((function e(){var t,n,r=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,m((function(){return a.down.post(t,n)}),"down");case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),this.post=Object(o.a)(i.a.mark((function e(){var t,n,r=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",n=r.length>1?r[1]:void 0,e.next=4,m((function(){return a.request.post(t,n)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),this.refreshRequest=function(){a.changeRequest(d())},this.changeRequest=function(e){a.request=e.http,a.down=e.down},this.signUp=function(e){return a.post("/api/v1/sign_up",e)},this.signIn=function(e){return a.post("/api/v1/sign_in",e)},this.getBasicInfo=function(e){return a.post("/api/v1/get_basic_info",e)},this.uploadAudio=function(e){return a.post("/api/v1/upload",e)},this.adminLogin=function(e,t,n){a.post("/api/v1/admin/login",e).then((function(e){t(e),a.refreshRequest(),n()}))},this.queryPapers=function(){return a.post("/api/v1/admin/query_papers")},this.addPaper=function(e){return a.post("/api/v1/admin/add_paper",e)},this.publishPaper=function(e){return a.post("/api/v1/admin/publish_paper",e)},this.editPaper=function(e){return a.post("/api/v1/admin/edit_paper",e)},this.QueryUsers=function(){return a.post("/api/v1/admin/query_users")},this.deleteUser=function(e){return a.post("/api/v1/admin/delete_user",e)},this.QueryAnswers=function(e){return a.post("/api/v1/admin/query_answers",e)},this.deleteAnswers=function(e){return a.post("/api/v1/admin/clear_answers",e)},this.querySettings=function(){return a.post("/api/v1/admin/query_settings")},this.updateSetting=function(e){return a.post("/api/v1/admin/update_setting",e)},this.queryStatistics=function(){return a.post("/api/v1/admin/statistics")},this.exportData=function(e){return a.download("/api/v1/admin/export",e)},this.request=t.http,this.down=t.down};t.a=(n=d(),new p(n))},463:function(e,t,a){e.exports=a(780)},468:function(e,t,a){},469:function(e,t,a){},506:function(e,t,a){},780:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),o=a.n(i),c=(a(468),a(469),a(67)),l=a(117),s=a(130),u=a(129),d=a(52),m=a(405),p=a(270),f=new function e(){Object(c.a)(this,e)},h=a(70),b=a(47),g=a(11),E=a(784),v=a(416),y=a(471),x=a(498),w=a(476),O=a(497),j=a(781),k=a(353),C=a.n(k),S=a(71),_=a(853),N=a(860),T=a(495),R=a(26),I=a(14),P=function(e,t){sessionStorage.setItem(e,JSON.stringify(t))},W=a(782),A=a(500),B=a(502);function D(){return r.a.createElement(S.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(w.a,{color:"inherit",href:"https://www.hanzi-readingtest.top/"},"www.hanzi-readingtest.top")," ",(new Date).getFullYear(),".")}var z=Object(_.a)((function(e){return Object(N.a)({paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.light},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}})}));function q(e){var t=z(),a=Object(n.useState)({email:"",name:"",chinese_class:"",hks_level:"",ethnic_background:"",has_chinese_acquaintance:!1,acquaintance_detail:""}),i=Object(g.a)(a,2),o=i[0],c=i[1],l=Object(n.useState)(!1),s=Object(g.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(!1),p=Object(g.a)(m,2),f=p[0],h=p[1],w=function(e){return function(t){var a=o;if("email"===e){var n=t.currentTarget.value.toLowerCase();a[e]=n,c(a),d(!/^([a-z0-9_.-]+)@([\da-z.]+)\.([a-z.]{2,6})$/.test(n))}else"has_chinese_acquaintance"!==e&&(a[e]=t.currentTarget.value,c(a))}};return r.a.createElement(T.a,{component:"main",maxWidth:"xs"},r.a.createElement(y.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(E.a,{className:t.avatar},r.a.createElement(C.a,null)),r.a.createElement(S.a,{component:"h1",variant:"h5"},"Chinese Character Reading Test"),r.a.createElement(j.a,{className:t.form},r.a.createElement(O.a,{container:!0,spacing:2},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(x.a,{error:u,helperText:u?"Invalid Email Address":null,variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:w("email")},o.email)),f&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(x.a,{name:"name",variant:"outlined",required:!0,fullWidth:!0,id:"name",label:"Name",autoComplete:"name",onChange:w("name")},o.name)),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"outlined",required:!0,fullWidth:!0,id:"chineseClass",label:"Chinese Class",name:"chineseClass",onChange:w("chinese_class")},o.chinese_class)),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"outlined",required:!0,fullWidth:!0,id:"hksLevel",label:"HSK Level",name:"hksLevel",onChange:w("hks_level")},o.hks_level)),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"outlined",required:!0,fullWidth:!0,id:"ethnicBackground",label:"Ethnic Background",name:"ethnicBackground",onChange:w("ethnic_background")},o.ethnic_background)),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(A.a,{control:r.a.createElement(W.a,{onChange:function(){c(Object(b.a)({},o,{has_chinese_acquaintance:!o.has_chinese_acquaintance}))},checked:o.has_chinese_acquaintance,color:"primary"}),label:"Do you have any Chinese family members or relatives?",labelPlacement:"end"})),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(B.a,{in:o.has_chinese_acquaintance},r.a.createElement(x.a,{variant:"outlined",fullWidth:!0,id:"acquaintanceDetail",label:"Acquaintance Detail",name:"acquaintanceDetail",onChange:w("acquaintance_detail")},o.acquaintance_detail))))),r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:f?function(){u?I.b.error("incorrect email address"):R.a.signUp(o).then((function(t){t.success?(P("user_info",t.data.user),e.history.push("/instruction")):I.b.error("\ud83d\ude80 "+t.info)}))}:function(){u?I.b.error("incorrect email address"):R.a.signIn({email:o.email}).then((function(t){t.success?t.data.user_not_exist?h(!0):(I.b.info("\ud83e\udd84 welcome "+t.data.user.name,{autoClose:999}),P("user_info",t.data.user),e.history.push("/instruction")):I.b.error("\ud83d\ude80 "+t.info)}))}},f?"sign up":"sign in"))),r.a.createElement(j.a,{mt:5},r.a.createElement(D,null)))}var L=a(198),U=(a(506),a(103)),F=a.n(U),M=(a(507),a(508),a(509),a(452)),V=a(6),Y=a(124),H=a(123),J=a(121),Q=a(418),K=a(94),G=a(510),X=a(501),$=a(511),Z=a(277),ee=a(512),te=a(425),ae=a.n(te),ne=a(424),re=a.n(ne),ie=a(423),oe=a.n(ie),ce=a(62),le=a.n(ce),se=a(859),ue=a(419),de=Object(M.a)(K.a)({fontSize:"xxx-large",fontFamily:"cursive",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"}),me=Object(V.a)({root:{marginTop:15,"& input:valid + fieldset":{borderColor:"green",borderWidth:2},"& input:invalid + fieldset":{borderColor:"lightBlue",borderWidth:2},"& input:valid:focus + fieldset":{borderLeftWidth:6,padding:"4px !important"}}})(x.a),pe=Object(M.a)(G.a)({root:{maxWidth:400,flexGrow:1}}),fe={bitRate:128,sampleRate:16e3},he=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).renderVisualization=function(){return r.a.createElement("div",{style:{height:"50px"},className:"wave-box"})},i.getBasicInfo=function(){R.a.getBasicInfo({uid:i.userInfo.id}).then((function(e){if(e.success){var t=e.data.current_paper.words.split(RegExp("[ \t\n]+"));if(e.data.progress_index>=t.length-1)return I.b.info("you've already finished current test, please wait util the next test released, if there's any issue, please contact your teacher"),void i.props.history.push("/finish");i.setState({audioConf:{bitRate:e.data.global_setting.BitRate,sampleRate:e.data.global_setting.SampleRate},wordIndex:e.data.progress_index+1,words:t,paper_info:{paper_name:e.data.current_paper.name,paper_version:e.data.current_paper.version,paper_id:e.data.current_paper.id,interval:e.data.current_paper.interval},begin:!0,reRenderTimer:!0},(function(){i.setState({reRenderTimer:!1}),Object(ue.a)(i.recordButtonRef.current),i.wave=F.a.WaveView({elem:".wave-box"})})),i.beginTime=le()()}else I.b.error(e.info)}))},i.uploadFile=function(e,t,a){var n=new FormData;e&&n.append("record",e,t+".mp3"),n.append("file_ext","mp3"),n.append("paper_name",i.state.paper_info.paper_name),n.append("paper_version",i.state.paper_info.paper_version),n.append("paper_id",i.state.paper_info.paper_id+""),n.append("uid",i.userInfo.id),n.append("word_index",i.state.wordIndex),n.append("word",i.state.words[i.state.wordIndex]),n.append("translation",i.state.input),n.append("duration",t),n.append("device",L.isTablet?"tablet":L.isMobile?"mobile":L.isDesktop?"desktop":"unknown"),R.a.uploadAudio(n).then((function(e){e.success?a():I.b.error(e.info+" -- if you can't go to next word, try refresh the page")}))},i.recStart=function(){i.rec=F()({type:"mp3",bitRate:i.state.audioConf.bitRate,sampleRate:i.state.audioConf.sampleRate,disableEnvInFix:!1,onProcess:function(e,t,a,n){i.wave.input(e[e.length-1],t,n)}}),i.rec.open((function(){i.rec.start();var e=i.rec.set;console.log("\u5f55\u5236\u4e2d\uff1a"+e.type+" "+e.sampleRate+"hz "+e.bitRate+"kbps")}),(function(e,t){console.log((t?"UserNotAllow\uff0c":"")+"\u65e0\u6cd5\u5f55\u97f3:"+e,1)}))},i.onClickStart=function(){i.recorded=!0,i.setState({status:"recording"}),i.recStart()},i.onClickStop=function(){i.recStop(),i.state.warningPopUp?i.uploadLoop(1e3*i.state.paper_info.interval):i.translationRef.current.lastChild.firstChild.focus(),i.setState({status:"stopped",warningPopUp:!1})},i.playAndStop=function(){i.audioPlayRef.current.play()},i.onNext=function(e){return function(){var t=e?1e3*i.state.paper_info.interval:le()().diff(i.beginTime,"milliseconds");e&&"recording"===i.state.status?(i.setState({warningPopUp:!0}),i.recStop()):i.uploadLoop(t)}},i.uploadLoop=function(e){i.setState({uploadingLock:!0});var t=setInterval((function(){i.recorded&&!i.audioBlob||(clearInterval(t),i.recorded=!1,i.uploadFile(i.audioBlob,e,(function(){window.URL.revokeObjectURL(i.state.src),i.state.wordIndex>=i.state.words.length-1?i.props.history.push("/finish"):(i.audioBlob=null,i.setState({wordIndex:i.state.wordIndex+1,reRenderTimer:!0,src:"",input:"",uploadingLock:!1,buttonDisabled:!0},(function(){i.beginTime=le()(),i.setState({reRenderTimer:!1})})),setTimeout((function(){i.setState({buttonDisabled:!1})}),999))})))}),250)},i.renderCountDown=function(e){return r.a.createElement(Q.CountdownCircleTimer,{isPlaying:i.state.begin&&!i.state.uploadingLock,duration:i.state.paper_info.interval,size:60,strokeWidth:8,colors:[[Y.a.A200,.33],[H.a[300],.33],[J.a[500],.34]],onComplete:function(t){console.log(t,e,"on complete"),i.onNext(!0)()}},(function(e){var t=e.remainingTime;return 1===t&&setTimeout((function(){i.setState({buttonDisabled:!0})}),888),r.a.createElement("div",{style:{fontSize:"xx-large"}},t)}))},i.renderWarningPopUp=function(){return r.a.createElement($.a,{open:i.state.warningPopUp,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(se.a,{severity:"warning"},"Sorry, time's up! Click bottom button to enter the next word..."))},i.state={begin:!1,status:"init",src:"",input:"",audioConf:fe,wordIndex:0,reRenderTimer:!1,words:[" "],warningPopUp:!1,uploadingLock:!1,buttonDisabled:!1,paper_info:{paper_name:"",paper_version:"",paper_id:0,interval:10}},i.recorded=!1,i.audioBlob=null,i.translationRef=Object(n.createRef)(),i.audioPlayRef=Object(n.createRef)(),i.recordButtonRef=Object(n.createRef)(),i.rec=F()({type:"mp3",bitRate:fe.bitRate,sampleRate:fe.sampleRate,disableEnvInFix:!1,onProcess:function(e,t,a,n){i.wave.input(e[e.length-1],t,n)}}),i.userInfo=function(e){var t=sessionStorage.getItem(e);return t?JSON.parse(t):null}("user_info"),i}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;null!=this.userInfo?(this.getBasicInfo(),this.rec.open((function(){e.wave=F.a.WaveView({elem:".wave-box"}),e.rec.close()}),(function(e,t){t?I.b.error("please allow the mic permission, refresh or restart the browser"):I.b.error("your device or web browser do not support audio recording, msg:"+e)}))):this.props.history.push("/info")}},{key:"recStop",value:function(){var e=this;this.rec.stop((function(t,a){e.rec.close(),console.log("audio duration: ",a),e.audioBlob=t,e.setState({src:window.URL.createObjectURL(t)})}),(function(t){console.log("\u5f55\u97f3\u5931\u8d25:"+t,1),e.rec.close()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.begin,n=t.status,i=t.src,o=t.words,c=t.wordIndex,l=t.reRenderTimer,s=t.uploadingLock,u=t.buttonDisabled,d=t.warningPopUp,m=o[c],p="recording"===n;return r.a.createElement(T.a,{maxWidth:"sm",className:"exam-page"},r.a.createElement(pe,{variant:"progress",steps:o.length,position:"static",activeStep:c}),r.a.createElement(Z.a,{open:!a||s,style:{zIndex:1201}},r.a.createElement(ee.a,{color:"inherit",size:150,thickness:2})),this.renderWarningPopUp(),r.a.createElement(O.a,{container:!0,spacing:2,alignItems:"center"},r.a.createElement(O.a,{item:!0,xs:12,style:{display:"flex",justifyContent:"center"}},!l&&this.renderCountDown(c)),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement("div",null,r.a.createElement(de,null,m))),r.a.createElement(O.a,{item:!0,xs:10},this.renderVisualization()),r.a.createElement(O.a,{item:!0,xs:2},r.a.createElement(X.a,{color:"primary",variant:"outlined",onClick:this.playAndStop,disabled:p,style:{float:"right"}},r.a.createElement(oe.a,{style:{fontSize:50}}))),r.a.createElement("audio",{ref:this.audioPlayRef,src:i}),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(me,{ref:this.translationRef,label:"Input translation here",required:!0,fullWidth:!0,autoComplete:"off",variant:"outlined",id:"validation-outlined-input",value:this.state.input,onChange:function(t){e.setState({input:t.currentTarget.value})},disabled:d})),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(v.a,{color:"primary",variant:"outlined",style:{marginTop:15,float:"right"},onClick:this.onNext(),disabled:u||p},"NEXT")),r.a.createElement(O.a,{item:!0,xs:12,style:{display:"flex",justifyContent:"center"}},r.a.createElement(X.a,{variant:"round",ref:this.recordButtonRef,className:"nocopy",onClick:p?this.onClickStop:this.onClickStart,size:"medium",color:p?"default":"primary",style:{position:"absolute",bottom:50,border:"thick solid"}},p?r.a.createElement(re.a,{style:{fontSize:80}}):r.a.createElement(ae.a,{style:{fontSize:80}})))))}}]),a}(n.Component),be=function(){return r.a.createElement(T.a,null,r.a.createElement(S.a,{component:"h1",variant:"h1"},"The End, Thank you !"))},ge=a(125),Ee=a(86),ve=a(504),ye=a(414),xe=a(783),we=a(517),Oe=a(854),je=a(855),ke=a(856),Ce=a(857),Se=a(34),_e=a(3),Ne=a(417),Te=Object(_.a)((function(e){return{item:{display:"flex",paddingTop:0,paddingBottom:0},button:{color:e.palette.text.secondary,fontWeight:e.typography.fontWeightMedium,justifyContent:"flex-start",letterSpacing:0,padding:"10px 8px",textTransform:"none",width:"100%"},icon:{marginRight:e.spacing(1)},title:{marginRight:"auto"},active:{color:e.palette.primary.main,"& $title":{fontWeight:e.typography.fontWeightMedium},"& $icon":{color:e.palette.primary.main}}}})),Re=function(e){var t=e.className,a=e.href,n=e.icon,i=e.title,o=Object(Se.a)(e,["className","href","icon","title"]),c=Te();return r.a.createElement(Ne.a,Object.assign({className:Object(_e.a)(c.item,t),disableGutters:!0},o),r.a.createElement(v.a,{activeClassName:c.active,className:c.button,component:Ee.b,to:a},n&&r.a.createElement(n,{className:c.icon,size:"20"}),r.a.createElement("span",{className:c.title},i)))},Ie="/static/images/avatars/avatar_6.png",Pe="yep, that's me",We="The Admin",Ae=[{href:"/admin/dashboard",icon:Oe.a,title:"Dashboard"},{href:"/admin/users",icon:je.a,title:"Users"},{href:"/admin/papers",icon:ke.a,title:"Papers"},{href:"/admin/settings",icon:Ce.a,title:"Settings"}],Be=Object(_.a)((function(){return{mobileDrawer:{width:256},desktopDrawer:{width:256,top:64,height:"calc(100% - 64px)"},avatar:{cursor:"pointer",width:64,height:64}}})),De=function(e){var t=e.onMobileClose,a=e.openMobile,i=Be(),o=Object(h.g)();Object(n.useEffect)((function(){a&&t&&t()}),[o.pathname]);var c=r.a.createElement(j.a,{height:"100%",display:"flex",flexDirection:"column"},r.a.createElement(j.a,{alignItems:"center",display:"flex",flexDirection:"column",p:2},r.a.createElement(E.a,{className:i.avatar,component:Ee.a,src:Ie,to:"/admin/dashboard"}),r.a.createElement(S.a,{className:i.name,color:"textPrimary",variant:"h5"},We),r.a.createElement(S.a,{color:"textSecondary",variant:"body2"},Pe)),r.a.createElement(ve.a,null),r.a.createElement(j.a,{p:2},r.a.createElement(ye.a,null,Ae.map((function(e){return r.a.createElement(Re,{href:e.href,key:e.title,title:e.title,icon:e.icon})})))),r.a.createElement(j.a,{flexGrow:1}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,{lgUp:!0},r.a.createElement(we.a,{anchor:"left",classes:{paper:i.mobileDrawer},onClose:t,open:a,variant:"temporary"},c)),r.a.createElement(xe.a,{mdDown:!0},r.a.createElement(we.a,{anchor:"left",classes:{paper:i.desktopDrawer},open:!0,variant:"persistent"},c)))};De.defaultProps={onMobileClose:function(){},openMobile:!1};var ze=De,qe=a(513),Le=a(514),Ue=a(515),Fe=a(430),Me=a.n(Fe),Ve=a(428),Ye=a.n(Ve),He=function(e){return r.a.createElement("img",Object.assign({alt:"Logo",src:"/static/logo.svg"},e))},Je=Object(_.a)((function(){return{root:{},avatar:{width:60,height:60}}})),Qe=function(e){var t=e.className,a=e.onMobileNavOpen,n=e.history,i=Object(Se.a)(e,["className","onMobileNavOpen","history"]),o=Je();return r.a.createElement(qe.a,Object.assign({className:Object(_e.a)(o.root,t),elevation:0},i),r.a.createElement(Le.a,null,r.a.createElement(Ee.a,{to:"/"},r.a.createElement(He,null)),r.a.createElement(j.a,{flexGrow:1}),r.a.createElement(Ue.a,{title:"Logout","aria-label":"logout"},r.a.createElement(X.a,{color:"inherit",onClick:function(){sessionStorage.removeItem("token"),n.push("/admin/login")}},r.a.createElement(Ye.a,null))),r.a.createElement(xe.a,{lgUp:!0},r.a.createElement(X.a,{color:"inherit",onClick:a},r.a.createElement(Me.a,null)))))},Ke=Object(_.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,display:"flex",height:"100%",overflow:"hidden",width:"100%"},wrapper:Object(ge.a)({display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},e.breakpoints.up("lg"),{paddingLeft:256}),contentContainer:{display:"flex",flex:"1 1 auto",overflow:"hidden"},content:{flex:"1 1 auto",height:"100%",overflow:"auto"}}})),Ge=function(e){var t=Ke(),a=Object(n.useState)(!1),i=Object(g.a)(a,2),o=i[0],c=i[1];return r.a.createElement("div",{className:t.root},r.a.createElement(Qe,{onMobileNavOpen:function(){return c(!0)},history:e.history}),r.a.createElement(ze,{onMobileClose:function(){return c(!1)},openMobile:o}),r.a.createElement("div",{className:t.wrapper},r.a.createElement("div",{className:t.contentContainer},r.a.createElement("div",{className:t.content},r.a.createElement(e.components,e)))))},Xe=(a(142),a(68)),$e=a(432),Ze=Object(n.forwardRef)((function(e,t){var a=e.children,n=e.title,i=void 0===n?"":n,o=Object(Se.a)(e,["children","title"]);return r.a.createElement("div",Object.assign({ref:t},o),r.a.createElement($e.a,null,r.a.createElement("title",null,i)),a)})),et=a(195),tt=a(27),at=a(18),nt=a(532),rt=a(627),it=a(533),ot=a(439),ct=a.n(ot),lt=a(440),st=a.n(lt),ut=Object(_.a)((function(){return{root:{}}})),dt={new_user:[],new_answer:[],labels:[]},mt={daily:dt,monthly:dt},pt={barThickness:15,maxBarThickness:15,barPercentage:.5,categoryPercentage:.5},ft=function(e){var t=ut(),a=Object(tt.a)(),i=Object(n.useState)(!0),o=Object(g.a)(i,2),c=o[0],l=o[1],s=e.statistics?e.statistics.chart:mt,u={animation:!1,cornerRadius:20,layout:{padding:0},legend:{display:!1},maintainAspectRatio:!1,responsive:!0,scales:{xAxes:[{ticks:{fontColor:a.palette.text.secondary},gridLines:{display:!1,drawBorder:!1}}],yAxes:[{ticks:{fontColor:a.palette.text.secondary,beginAtZero:!0,min:0},gridLines:{borderDash:[2],borderDashOffset:[2],color:a.palette.divider,drawBorder:!1,zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2],zeroLineColor:a.palette.divider}}]},tooltips:{backgroundColor:a.palette.background.default,bodyFontColor:a.palette.text.secondary,borderColor:a.palette.divider,borderWidth:1,enabled:!0,footerFontColor:a.palette.text.secondary,intersect:!1,mode:"index",titleFontColor:a.palette.text.primary}};return r.a.createElement(nt.a,{className:t.root},r.a.createElement(rt.a,{action:r.a.createElement(v.a,{endIcon:r.a.createElement(ct.a,null),size:"small",variant:"text",onClick:function(){l(!c)}},"Switch to ",c?"Last 7 months":"Last 7 days"),title:"Latest Statistics"}),r.a.createElement(ve.a,null),r.a.createElement(it.a,null,r.a.createElement(j.a,{height:400,position:"relative"},r.a.createElement(et.Bar,{data:{datasets:[Object(b.a)({},pt,{backgroundColor:at.a.indigo[500],data:c?s.daily.new_answer:s.monthly.new_answer,label:"New Answer"}),Object(b.a)({},pt,{backgroundColor:at.a.green[100],data:c?s.daily.new_user:s.monthly.new_user,label:"New user"})],labels:c?s.daily.labels:s.monthly.labels},options:u}))),r.a.createElement(ve.a,null),r.a.createElement(j.a,{display:"flex",justifyContent:"flex-end",p:2},r.a.createElement(v.a,{color:"primary",endIcon:r.a.createElement(st.a,null),size:"small",variant:"text",onClick:function(){e.history.push("/admin/users")}},"Overview")))},ht=a(420),bt=a(438),gt=a.n(bt),Et=Object(_.a)((function(){return{root:{height:"100%"},avatar:{backgroundColor:at.a.orange[600],height:56,width:56}}})),vt=function(e){var t=e.className,a=e.statistics,n=Object(Se.a)(e,["className","statistics"]),i=Et(),o=function(){return a?(100*Number(a.total_progress)).toFixed(2):0};return r.a.createElement(nt.a,Object.assign({className:Object(_e.a)(i.root,t)},n),r.a.createElement(it.a,null,r.a.createElement(O.a,{container:!0,justify:"space-between",spacing:3},r.a.createElement(O.a,{item:!0},r.a.createElement(S.a,{color:"textSecondary",gutterBottom:!0,variant:"h6"},"ACTIVE PAPER's PROGRESS"),r.a.createElement(S.a,{color:"textPrimary",variant:"h3"},o(),"%")),r.a.createElement(O.a,{item:!0},r.a.createElement(E.a,{className:i.avatar},r.a.createElement(gt.a,null)))),r.a.createElement(j.a,{mt:3},r.a.createElement(ht.a,{value:Number(o()),variant:"determinate"}))))},yt=a(437),xt=a.n(yt),wt=a(436),Ot=a.n(wt),jt=Object(_.a)((function(e){return{root:{height:"100%"},avatar:{backgroundColor:at.a.green[600],height:56,width:56},differenceIcon:{color:at.a.green[900]},differenceValue:{color:at.a.green[900],marginRight:e.spacing(1)}}})),kt=function(e){var t=e.className,a=e.statistics,n=Object(Se.a)(e,["className","statistics"]),i=jt();return r.a.createElement(nt.a,Object.assign({className:Object(_e.a)(i.root,t)},n),r.a.createElement(it.a,null,r.a.createElement(O.a,{container:!0,justify:"space-between",spacing:3},r.a.createElement(O.a,{item:!0},r.a.createElement(S.a,{color:"textSecondary",gutterBottom:!0,variant:"h6"},"TOTAL USERS"),r.a.createElement(S.a,{color:"textPrimary",variant:"h3"},a?a.total_users:"loading...")),r.a.createElement(O.a,{item:!0},r.a.createElement(E.a,{className:i.avatar},r.a.createElement(Ot.a,null)))),r.a.createElement(j.a,{mt:2,display:"flex",alignItems:"center"},r.a.createElement(xt.a,{className:i.differenceIcon}),r.a.createElement(S.a,{className:i.differenceValue,variant:"body2"},a?(a.current_month_users/a.total_users*100).toFixed(2):0,"%"),r.a.createElement(S.a,{color:"textSecondary",variant:"caption"},"Since last month"))))},Ct=a(863),St=Object(_.a)((function(){return{root:{height:"100%"},avatar:{backgroundColor:at.a.indigo[600],height:56,width:56}}})),_t=function(e){var t=e.className,a=e.statistics,n=Object(Se.a)(e,["className","statistics"]),i=St();return r.a.createElement(nt.a,Object.assign({className:Object(_e.a)(i.root,t)},n),r.a.createElement(it.a,null,r.a.createElement(O.a,{container:!0,justify:"space-between",spacing:3},r.a.createElement(O.a,{item:!0},r.a.createElement(S.a,{color:"textSecondary",gutterBottom:!0,variant:"h6"},"TOTAL ANSWERS"),r.a.createElement(S.a,{color:"textPrimary",variant:"h3"},a?a.total_answers:"loading...")),r.a.createElement(O.a,{item:!0},r.a.createElement(E.a,{className:i.avatar},r.a.createElement(Ct.a,null))))))},Nt=a(441),Tt=a.n(Nt),Rt=a(443),It=a.n(Rt),Pt=a(442),Wt=a.n(Pt),At=a(444),Bt=a.n(At),Dt=Object(_.a)((function(){return{root:{height:"100%"}}})),zt={desktop:0,tablet:0,mobile:0,unknown:0},qt=function(e){var t=e.className,a=e.statistics,n=Object(Se.a)(e,["className","statistics"]),i=Dt(),o=Object(tt.a)(),c=a?a.device:zt,l=c.unknown+c.mobile+c.tablet+c.desktop||1,s={animation:!1,cutoutPercentage:82,layout:{padding:0},legend:{display:!1},maintainAspectRatio:!1,responsive:!0,tooltips:{backgroundColor:o.palette.background.default,bodyFontColor:o.palette.text.secondary,borderColor:o.palette.divider,borderWidth:1,enabled:!0,footerFontColor:o.palette.text.secondary,intersect:!1,mode:"index",titleFontColor:o.palette.text.primary}},u=[{title:"Desktop",value:(c.desktop/l*100).toFixed(1),icon:Tt.a,color:at.a.indigo[500]},{title:"Tablet",value:(c.tablet/l*100).toFixed(1),icon:Wt.a,color:at.a.red[600]},{title:"Mobile",value:(c.mobile/l*100).toFixed(1),icon:It.a,color:at.a.orange[600]},{title:"Unknown",value:(c.unknown/l*100).toFixed(1),icon:Bt.a,color:at.a.grey[600]}];return r.a.createElement(nt.a,Object.assign({className:Object(_e.a)(i.root,t)},n),r.a.createElement(rt.a,{title:"Traffic by Device"}),r.a.createElement(ve.a,null),r.a.createElement(it.a,null,r.a.createElement(j.a,{height:300,position:"relative"},r.a.createElement(et.Doughnut,{data:function(){return{datasets:[{data:[c.desktop,c.tablet,c.mobile,c.unknown],backgroundColor:[at.a.indigo[500],at.a.red[600],at.a.orange[600],at.a.grey[400]],borderWidth:4,borderColor:at.a.common.white,hoverBorderColor:at.a.common.white}],labels:["Desktop","Tablet","Mobile","Unknown"]}},options:s})),r.a.createElement(j.a,{display:"flex",justifyContent:"center",mt:2},u.map((function(e){var t=e.color,a=e.icon,n=e.title,i=e.value;return r.a.createElement(j.a,{key:n,p:.5,textAlign:"center"},r.a.createElement(a,{color:"action"}),r.a.createElement(S.a,{color:"textPrimary",variant:"body1"},n),r.a.createElement(S.a,{style:{color:t,fontSize:"1.7rem"},variant:"h5"},i,"%"))})))))},Lt=a(862),Ut=r.a.createElement(Lt.a,{style:{fontSize:48},spin:!0}),Ft=Object(_.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),Mt=function(e){var t=Ft(),a=Object(n.useState)(null),i=Object(g.a)(a,2),o=i[0],c=i[1],l=Object(n.useState)(!0),s=Object(g.a)(l,2),u=s[0],d=s[1];return Object(n.useEffect)((function(){R.a.queryStatistics().then((function(e){e.success?(d(!1),c(e.data)):I.b.error(e.info)}))}),[]),r.a.createElement(Ze,{className:t.root,title:"Dashboard"},r.a.createElement(T.a,{maxWidth:!1},r.a.createElement(Xe.a,{indicator:Ut,spinning:u},r.a.createElement(O.a,{container:!0,spacing:3},r.a.createElement(O.a,{item:!0,lg:4,sm:6,xl:4,xs:12},r.a.createElement(kt,{statistics:o})),r.a.createElement(O.a,{item:!0,lg:4,sm:6,xl:4,xs:12},r.a.createElement(vt,{statistics:o})),r.a.createElement(O.a,{item:!0,lg:4,sm:6,xl:4,xs:12},r.a.createElement(_t,{statistics:o})),r.a.createElement(O.a,{item:!0,lg:8,md:12,xl:9,xs:12},r.a.createElement(ft,Object.assign({},e,{statistics:o}))),r.a.createElement(O.a,{item:!0,lg:4,md:6,xl:3,xs:12},r.a.createElement(qt,{statistics:o}))))))},Vt=(a(264),a(127)),Yt=a(636),Ht=a(638),Jt=a(639),Qt=a(640),Kt=a(641),Gt=a(637),Xt=a(275),$t=a(642),Zt=a(409),ea=a(454),ta=a(274),aa=a(445),na=a.n(aa),ra=a(858),ia=a(446),oa=a.n(ia);var ca=Object(_.a)((function(e){return{root:{},avatar:{marginRight:e.spacing(2)},toolBar:{marginBottom:e.spacing(1)}}})),la=[{title:"Name",dataIndex:"name",render:void 0},{title:"Email",dataIndex:"email"},{title:"Chinese Class",dataIndex:"chinese_class"},{title:"HSK Level",dataIndex:"hks_level"},{title:"Ethnic Background",dataIndex:"ethnic_background"},{title:"CN-relation",dataIndex:"has_chinese_acquaintance",render:function(e){return e?r.a.createElement(na.a,{style:{color:"green"}}):""}},{title:"Acquaintance Detail",dataIndex:"acquaintance_detail"},{title:"RegisteredAt",dataIndex:"created_at",render:function(e){return le()(e).format("YYYY-MM-DD hh:mm:ss")}},{title:"Operation",dataIndex:"id",render:void 0,fixed:"right"}],sa={getCheckboxProps:function(e){return{uid:e.id}}},ua=function(e){var t=e.className,a=e.users,i=e.papers,o=e.reload,c=e.history,l=Object(Se.a)(e,["className","users","papers","reload","history"]),s=ca(),u=Object(n.useState)(""),d=Object(g.a)(u,2),m=d[0],p=d[1],f=Object(n.useState)(0),h=Object(g.a)(f,2),y=h[0],w=h[1],O=Object(n.useState)(null),k=Object(g.a)(O,2),C=k[0],_=k[1],N=Object(n.useState)([]),T=Object(g.a)(N,2),P=T[0],W=T[1],A=Object(n.useState)(!1),B=Object(g.a)(A,2),D=B[0],z=B[1],q=Object(n.useState)([]),L=Object(g.a)(q,2),U=L[0],F=L[1],M=Object(n.useState)(0),V=Object(g.a)(M,2),Y=V[0],H=V[1],J=Object(n.useState)("csv"),Q=Object(g.a)(J,2),K=Q[0],G=Q[1],X=Object(n.useState)(!1),$=Object(g.a)(X,2),Z=$[0],ee=$[1],te=function(e){return function(){W(e.papers),_({uid:e.id})}},ae=function(e){return function(){w(e)}};la[0].render=function(e){return r.a.createElement(j.a,{alignItems:"center",display:"flex"},r.a.createElement(E.a,{className:s.avatar},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/\s+/," ").split(" ").slice(0,2).map((function(e){return e&&e[0].toUpperCase()})).join("")}(e)),r.a.createElement(S.a,{color:"textPrimary",variant:"body1"},e))},la[la.length-1].render=function(e,t){return r.a.createElement(Yt.a,{size:"small"},r.a.createElement(v.a,{color:"primary",onClick:te(t),disabled:t.papers.length<=0},"review"),r.a.createElement(v.a,{color:"secondary",onClick:ae(e)},"delete"))};var ne=function(){w(0),_(null),z(!1)},re=function(e){p(e.currentTarget.value)},ie=function(e){return function(){var t={table:e,ext:K,paper_id:Number(Y)};U&&Z&&(t.ids=U),R.a.exportData(t).then((function(e){e.success?function(e){var t=e.headers["content-disposition"].match(/filename=(.*)/)[1],a=e.headers["content-type"];oa()(e.data,t,a)}(e):I.b.error(e.info)}))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:s.toolBar},r.a.createElement(j.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(v.a,{color:"primary",variant:"contained",onClick:function(){z(!0),ee(!0)},disabled:U.length<=0},"Export Selected"),r.a.createElement(v.a,{style:{marginLeft:12},color:"primary",variant:"contained",onClick:function(){z(!0),ee(!1)}},"Export All")),r.a.createElement(j.a,{mt:3},r.a.createElement(nt.a,null,r.a.createElement(it.a,null,r.a.createElement(j.a,{maxWidth:500},r.a.createElement(x.a,{size:"small",fullWidth:!0,InputProps:{startAdornment:r.a.createElement($t.a,{position:"start"},r.a.createElement(ta.a,{fontSize:"small",color:"action"},r.a.createElement(ra.a,null)))},placeholder:"Search user",variant:"outlined",value:m,onChange:re})))))),r.a.createElement(nt.a,Object.assign({className:Object(_e.a)(s.root,t)},l),r.a.createElement(j.a,null,r.a.createElement(Vt.a,{size:"small",scroll:{x:!0},rowKey:"id",rowSelection:Object(b.a)({type:"checkbox"},sa,{onSelect:function(e,t,a){F(a.map((function(e){return e.id})))},onSelectAll:function(e,t){F(t.map((function(e){return e.id})))}}),columns:la,dataSource:a.filter((function(e){return-1!==e.name.toLowerCase().search(m.toLowerCase())})),pagination:{defaultPageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"Total ".concat(e," Users")}}}),(0===Y&&i.length>0&&H(i[i.length-1].id),r.a.createElement(Gt.a,{open:!!D,onClose:ne},r.a.createElement(Ht.a,null,"Ready to export data?"),r.a.createElement(Jt.a,{style:{marginBottom:30}},r.a.createElement(Qt.a,null,"export csv for less network bandwidth consumption..."),r.a.createElement(j.a,{display:"flex"},r.a.createElement(j.a,{marginRight:5,width:"40%"},r.a.createElement(Zt.a,null,"select paper"),r.a.createElement(ea.a,{native:!0,fullWidth:!0,value:Y,onChange:function(e){H(e.currentTarget.value)},input:r.a.createElement(Xt.a,{id:"export-select-paper"})},i.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement(j.a,{width:"40%"},r.a.createElement(Zt.a,null,"select Extension"),r.a.createElement(ea.a,{native:!0,fullWidth:!0,value:K,onChange:function(e){G(e.currentTarget.value)},input:r.a.createElement(Xt.a,{id:"export-select-paper"})},r.a.createElement("option",{value:"csv"},"csv"),r.a.createElement("option",{value:"xlsx"},"xlsx"))))),r.a.createElement(Kt.a,null,r.a.createElement(v.a,{onClick:ie("user"),color:"primary"},"Export Users"),r.a.createElement(v.a,{onClick:ie("answer"),color:"primary"},"Export Answers"),r.a.createElement(v.a,{onClick:ne,color:"default"},"Cancel")))),r.a.createElement(Gt.a,{open:!!y,onClose:ne},r.a.createElement(Ht.a,null,"Are you sure to delete?"),r.a.createElement(Jt.a,null,r.a.createElement(Qt.a,null,"it's a dangerous move!"),r.a.createElement(Qt.a,null,"If you delete an User, then all of his progress is wiped off too!"),r.a.createElement(Qt.a,null,"Delete Answers will only clear the user's progress...")),r.a.createElement(Kt.a,null,r.a.createElement(v.a,{onClick:function(){R.a.deleteAnswers({uid:y}).then((function(e){e.success?(I.b.warning("\ud83d\ude22 you actually deleted somebody's progress!"),ne()):I.b.error(e.info)}))},color:"secondary"},"Delete Answers"),r.a.createElement(v.a,{onClick:function(){R.a.deleteUser({uid:y}).then((function(e){e.success?(I.b.warning("\ud83d\ude22 you actually deleted somebody!"),o(),ne()):I.b.error(e.info)}))},color:"secondary"},"Delete User"),r.a.createElement(v.a,{onClick:ne,color:"primary"},"Cancel"))),r.a.createElement(Gt.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:!!C,onClose:ne},r.a.createElement(Ht.a,null,"Select Paper"),r.a.createElement(Jt.a,null,r.a.createElement(Zt.a,null,"paper"),r.a.createElement(ea.a,{native:!0,fullWidth:!0,value:C?C.pid:0,onChange:function(e){_({uid:C.uid,pid:e.target.value})},input:r.a.createElement(Xt.a,{id:"demo-dialog-native"})},P?P.map((function(e){return r.a.createElement("option",{key:e.pid,value:e.pid},e.p_name)})):r.a.createElement("option",{"aria-label":"None",value:""}))),r.a.createElement(Kt.a,null,r.a.createElement(v.a,{onClick:function(){c.push("/admin/users/"+(C.pid||P[0].pid)+"/"+C.uid)},color:"primary"},"Ok"),r.a.createElement(v.a,{onClick:ne,color:"primary"},"Cancel"))))))},da=Object(_.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(1),paddingTop:e.spacing(1)}}})),ma=function(e){var t=da(),a=Object(n.useState)([]),i=Object(g.a)(a,2),o=i[0],c=i[1],l=Object(n.useState)([]),s=Object(g.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(!0),p=Object(g.a)(m,2),f=p[0],h=p[1],b=function(){R.a.queryPapers().then((function(e){e.success?d(e.data.papers):I.b.error(e.info)})),R.a.QueryUsers().then((function(e){h(!1),e.success?c(e.data):I.b.error(e.info)}))};return Object(n.useEffect)((function(){b()}),[]),r.a.createElement(Ze,{className:t.root,title:"Customers"},r.a.createElement(T.a,{maxWidth:!1},r.a.createElement(j.a,{mt:3,style:{minWidth:600}},r.a.createElement(Xe.a,{indicator:Ut,spinning:f},r.a.createElement(ua,{users:o,papers:u,reload:b,history:e.history})))))},pa=a(503),fa=Object(_.a)({root:{}}),ha={BitRate:128,SampleRate:16e3},ba=function(e){var t=e.className,a=Object(Se.a)(e,["className"]),i=fa(),o=Object(n.useState)(ha),c=Object(g.a)(o,2),l=c[0],s=c[1],u=Object(n.useState)(!1),d=Object(g.a)(u,2),m=d[0],p=d[1],f=Object(n.useState)(!1),h=Object(g.a)(f,2),E=h[0],y=h[1],w=function(){y(!1)},k=function(e){s(Object(b.a)({},l,Object(ge.a)({},e.target.name,e.target.value)))};return Object(n.useEffect)((function(){R.a.querySettings().then((function(e){e.success?s(e.data):I.b.error(e.info)}))}),[m]),r.a.createElement("form",Object.assign({className:Object(_e.a)(i.root,t)},a),r.a.createElement(nt.a,null,r.a.createElement(rt.a,{subheader:"tune audio config",title:"Audio Config"}),r.a.createElement(ve.a,null),r.a.createElement(it.a,null,r.a.createElement(O.a,{container:!0},r.a.createElement(O.a,{item:!0,xs:4},r.a.createElement(Zt.a,null,"SampleRate"),r.a.createElement(ea.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",name:"SampleRate",fullWidth:!0,value:l.SampleRate,onChange:k},r.a.createElement(pa.a,{value:8e3},"8000"),r.a.createElement(pa.a,{value:11025},"11025"),r.a.createElement(pa.a,{value:16e3},"16000"),r.a.createElement(pa.a,{value:22050},"22050"),r.a.createElement(pa.a,{value:24e3},"24000"),r.a.createElement(pa.a,{value:44100},"44100"),r.a.createElement(pa.a,{value:48e3},"44100"),r.a.createElement(pa.a,{value:5e4},"50000"),r.a.createElement(pa.a,{value:96e3},"96000"))),r.a.createElement(O.a,{item:!0,xs:4}),r.a.createElement(O.a,{item:!0,xs:4},r.a.createElement(Zt.a,null,"BitRate"),r.a.createElement(x.a,{name:"BitRate",type:"number",InputLabelProps:{shrink:!0},fullWidth:!0,variant:"standard",value:l.BitRate,onChange:k})))),r.a.createElement(ve.a,null),r.a.createElement(j.a,{display:"flex",justifyContent:"space-between",p:2},r.a.createElement(v.a,{color:"secondary",variant:"contained",onClick:function(){y(!0)}},"Reset"),r.a.createElement(v.a,{color:"primary",variant:"contained",onClick:function(){R.a.updateSetting(l).then((function(e){e.success?(I.b.success("\ud83c\udf89 YAY, you did it! \u2728"),p((function(e){return!e}))):I.b.error(e.info)}))}},"Update"),r.a.createElement(Gt.a,{open:E,onClose:w,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Ht.a,{id:"alert-dialog-title"},"Do you confirm to proceed the reset?"),r.a.createElement(Jt.a,null,r.a.createElement(Qt.a,{id:"alert-dialog-description"},"The default value of SampleRate is 16000, BitRate is 128.")),r.a.createElement(Kt.a,null,r.a.createElement(v.a,{onClick:function(){R.a.updateSetting(ha).then((function(e){e.success?(I.b.success("\ud83c\udf89 YAY, you did it! \u2728"),p((function(e){return!e})),w()):I.b.error(e.info)}))},color:"primary"},"Ok"),r.a.createElement(v.a,{onClick:w,color:"primary"},"Cancel"))))))},ga=Object(_.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),Ea=function(){var e=ga();return r.a.createElement(Ze,{className:e.root,title:"Settings"},r.a.createElement(T.a,{maxWidth:"lg"},r.a.createElement(j.a,{mt:3},r.a.createElement(ba,null))))},va=a(785),ya=(a(774),a(451).a.TextArea),xa=Object(_.a)((function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}},chip:{margin:e.spacing(.5)},input:{marginLeft:e.spacing(1),flex:1}}})),wa=function(e){var t=xa(),a=Object(n.useState)(""),i=Object(g.a)(a,2),o=i[0],c=i[1],l=Object(n.useState)(0),s=Object(g.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(""),p=Object(g.a)(m,2),f=p[0],h=p[1];return r.a.createElement(O.a,{container:!0},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(Gt.a,{maxWidth:"md",fullWidth:!0,open:e.open,onClose:e.onClickExit},"edit"===e.type&&r.a.createElement(Ht.a,null,"Id: ",e.data&&e.data.id||0,"; PaperName: ",e.data&&e.data.name||""),r.a.createElement(Jt.a,{className:t.root},r.a.createElement(O.a,{container:!0},"add"===e.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{item:!0,xs:2},r.a.createElement(Zt.a,null,"Paper Name")),r.a.createElement(O.a,{item:!0,xs:10,style:{marginBottom:20}},r.a.createElement(x.a,{variant:"standard",onChange:function(e){h(e.currentTarget.value)}}))),r.a.createElement(O.a,{item:!0,xs:2},r.a.createElement(Zt.a,null,"Interval (per/s)")),r.a.createElement(O.a,{item:!0,xs:10,style:{marginBottom:20}},r.a.createElement(x.a,{type:"number",variant:"standard",defaultValue:e.data&&e.data.interval,onChange:function(e){d(parseInt(e.currentTarget.value))}})),r.a.createElement(O.a,{item:!0,xs:2},r.a.createElement(Zt.a,null,"Words")),r.a.createElement(O.a,{item:!0,xs:10},r.a.createElement(ya,{placeholder:"you can edit words here",autoSize:!0,defaultValue:e.data&&e.data.words,onChange:function(e){c(e.currentTarget.value)}})))),r.a.createElement(Kt.a,null,r.a.createElement(v.a,{onClick:function(){"add"===e.type?R.a.addPaper({name:f,interval:u,words:o}).then((function(t){t.success?(I.b.success("success!"),e.refreshPaper(),e.onClickExit()):I.b.error(t.info)})):R.a.editPaper(Object(b.a)({},e.data,{words:o,interval:u})).then((function(t){t.success?(I.b.success("updated!"),e.refreshPaper(),e.onClickExit()):I.b.error(t.info)}))},color:"primary"},"Ok"),r.a.createElement(v.a,{onClick:e.onClickExit,color:"primary"},"Cancel")))))};var Oa=Object(_.a)((function(e){return{root:{},avatar:{marginRight:e.spacing(2)}}})),ja=[{title:"Id",dataIndex:"id",sorter:function(e,t){return e.id-t.id},sortDirections:["ascend","descend","ascend"]},{title:"CreatedAt",dataIndex:"created_at",render:function(e){return le()(e).format("YYYY-MM-DD hh:mm:ss")}},{title:"Name",render:function(e){return e.inuse?r.a.createElement("span",{style:{color:"green",fontSize:"x-large"}},e.name):r.a.createElement("span",null,e.name)}},{title:"Interval(/s)",dataIndex:"interval"},{title:"Words",dataIndex:"words",render:function(e){return function(e){var t={},a=[];return e.map((function(e,n){return a.push({word:e,dup:!1}),t[e]?1===t[e][0]?(t[e][0]=2,a[t[e][1]].dup=!0,a[n].dup=!0):2===t[e][0]&&(a[n].dup=!0):t[e]=[1,n],null})),a}(e.split(RegExp("[ \t\n]+"))).map((function(e,t){return r.a.createElement(va.a,{key:t,variant:"outlined",size:"small",label:e.word,color:e.dup?"secondary":"primary"})}))}},{title:"Operation",render:void 0,fixed:"right"}],ka={getCheckboxProps:function(e){return{paper_id:e.id}}},Ca=function(e){var t=e.className,a=e.papers,i=e.refreshPaper,o=Object(Se.a)(e,["className","papers","refreshPaper"]),c=Oa(),l=Object(n.useState)({open:!1,refreshPaper:i}),s=Object(g.a)(l,2),u=s[0],d=s[1],m=function(){d({open:!1})};return ja[5].render=function(e){return r.a.createElement(Yt.a,{size:"small"},r.a.createElement(v.a,{color:"primary",onClick:(a=e,function(){d({open:!0,onClickExit:m,data:a,refreshPaper:i})})},"edit"),r.a.createElement(v.a,{color:"primary",onClick:(t=e.id,function(){R.a.publishPaper({pid:t}).then((function(e){e.success?(I.b.success("success!"),i()):I.b.error(e.info)}))})},"publish"),r.a.createElement(v.a,{color:"secondary"},"delete"));var t,a},r.a.createElement(nt.a,Object.assign({className:Object(_e.a)(c.root,t)},o),r.a.createElement(wa,Object.assign({},u,{type:"edit"})),r.a.createElement(j.a,{minWidth:600},r.a.createElement(Vt.a,{size:"small",scroll:{x:!0},rowKey:"id",columns:ja,dataSource:a,rowSelection:Object(b.a)({},ka,{type:"checkbox"}),pagination:{defaultPageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"Total ".concat(e," Papers")}}})))},Sa=Object(_.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),_a=function(){var e=Sa(),t=Object(n.useState)([]),a=Object(g.a)(t,2),i=a[0],o=a[1],c=Object(n.useState)({}),l=Object(g.a)(c,2),s=l[0],u=l[1],d=Object(n.useState)(!1),m=Object(g.a)(d,2),p=m[0],f=m[1],h=Object(n.useState)(!0),b=Object(g.a)(h,2),E=b[0],y=b[1],x=function(){R.a.queryPapers().then((function(e){y(!1),e.success?(o(e.data.papers),u(e.data.active_paper)):I.b.error(e.info)}))};Object(n.useEffect)(x,[]);return r.a.createElement(Ze,{className:e.root,title:"Papers"},r.a.createElement(T.a,{maxWidth:!1},r.a.createElement(wa,{open:p,onClickExit:function(){f(!1)},refreshPaper:x,type:"add"}),r.a.createElement(j.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(v.a,{color:"primary",variant:"contained",onClick:function(){f(!0)}},"Add New Paper")),r.a.createElement(j.a,null,r.a.createElement(S.a,{color:"textPrimary",variant:"h5"},"Active Paper: id(",s.id,"): ",s.name)),r.a.createElement(j.a,{mt:3},r.a.createElement(Xe.a,{indicator:Ut,spinning:E},r.a.createElement(Ca,{papers:i,refreshPaper:x})))))},Na={style:{margin:8}},Ta=[{title:"No.",dataIndex:"word_index",key:"word_index",render:function(e){return e+1}},{title:"Time",dataIndex:"created_at",key:"created_at",render:function(e){return le()(e).format("hh:mm:ss")}},{title:"Word",dataIndex:"word",key:"word",render:function(e){return r.a.createElement("span",null,e)}},{title:"Translation",dataIndex:"translation",key:"translation"},{title:"Duration",dataIndex:"duration",key:"duration",render:function(e){return r.a.createElement("span",null,e/1e3,"s")}},{title:"Device",dataIndex:"device",key:"device"},{title:"Action",dataIndex:"audio_url",key:"audio_url",fixed:"right",render:function(e){return e?r.a.createElement("audio",Object.assign({controls:!0,src:"/file/"+e},Na)):""}}],Ra=function(e){var t=e.location.pathname.split("/"),a={uid:parseInt(t.pop()),paper_id:parseInt(t.pop())||1},i=Object(n.useState)([]),o=Object(g.a)(i,2),c=o[0],l=o[1],s=Object(n.useState)(!0),u=Object(g.a)(s,2),d=u[0],m=u[1];return Object(n.useEffect)((function(){R.a.QueryAnswers(a).then((function(e){m(!1),e.success?l(e.data):I.b.error(e.info)}))}),[]),r.a.createElement(Xe.a,{indicator:Ut,spinning:d},r.a.createElement(Vt.a,{size:"small",rowKey:"id",columns:Ta,dataSource:c,pagination:{defaultPageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"Total ".concat(e," Answers")}}}))},Ia=a(861),Pa=[{lang:"English",abbr:"en",title:"Test Instructions",content:["Please test in a quiet environment.","Please enable recording permission if you see a relative pop-up.","Please click the record button and read the presented word. After reading the word, click the record button again to end.","Please input the meaning of the word in your native language.","The time limit for each word is 15 seconds.","Please click the \u201cNEXT\u201d button after completing each word.","Please click the \u201cNEXT\u201d button if you do not know the word.","Please do not consult the dictionary & textbooks or search the word online.","Please do not quit before completion."],endings:["Information provided will be treated strictly confidential and will not be disclosed to third parties.","We will not send you any irrelevant information.","Thank you for your participation !"],button:"Agree And Proceed"},{lang:"Vi\u1ec7tName",abbr:"vi",title:"H\u01b0\u1edbng d\u1eabn ki\u1ec3m tra",content:["Vui l\xf2ng ki\u1ec3m tra trong m\xf4i tr\u01b0\u1eddng y\xean t\u0129nh.","N\u1ebfu nh\xecn th\u1ea5y c\u1eeda s\u1ed5 b\u1eadt l\xean, h\xe3y cho ph\xe9p s\u1eed d\u1ee5ng micr\xf4.","Vui l\xf2ng nh\u1ea5p v\xe0o n\xfat ghi \xe2m \u0111\u1ec3 \u0111\u1ecdc t\u1eeb/ch\u1eef, sau khi \u0111\u1ecdc xong \u1ea5n l\u1ea1i v\xe0o n\xfat ghi \xe2m \u0111\u1ec3 k\u1ebft th\xfac.","Sau \u0111\xf3 g\xf5 b\u1ea3n d\u1ecbch ti\u1ebfng vi\u1ec7t t\u01b0\u01a1ng \u1ee9ng v\xe0o trong khung.","Th\u1eddi h\u1ea1n m\u1ed7i t\u1eeb/ch\u1eef l\xe0 15 gi\xe2y.","N\u1ebfu ho\xe0n th\xe0nh tr\u01b0\u1edbc, h\xe3y nh\u1ea5p v\xe0o \u201cNext\u201d.","N\u1ebfu g\u1eb7p ch\u1eef/t\u1eeb k bi\u1ebft \u0111\u1ecdc ho\u1eb7c kh\xf4ng bi\u1ebft ngh\u0129a, h\xe3y nh\u1ea5p v\xe0o \u201cNext\u201d.","Vui l\xf2ng kh\xf4ng tra t\u1eeb \u0111i\u1ec3n v\xe0 b\xe0i kh\xf3a ho\u1eb7c t\xecm tr\xean m\u1ea1ng.","Vui l\xf2ng k tho\xe1t ra kh\u1ecfi b\xe0i ki\u1ec3m tra gi\u1eefa ch\u1eebng."],endings:["Th\xf4ng tin b\u1ea1n cung c\u1ea5p trong phi\u1ebfu tr\u1ea3 l\u1eddi s\u1ebd \u0111\u01b0\u1ee3c b\u1ea3o m\u1eadt nghi\xeam, s\u1ebd kh\xf4ng ti\u1ebft l\u1ed9 cho b\xean th\u1ee9 ba.","V\xe0 ch\xfang t\xf4i c\u0169ng s\u1ebd kh\xf4ng g\u1eedi cho b\u1ea1n b\u1ea5t k\u1ef3 th\xf4ng tin kh\xf4ng li\xean quan n\xe0o.","C\u1ea3m \u01a1n b\u1ea1n \u0111\xe3 tham gia !"],button:"\u0110\u1ed3ng \xfd v\xe0 Ti\u1ebfp t\u1ee5c"},{lang:"\u4e2d\u6587",abbr:"zh",title:"\u6d4b\u8bd5\u8bf4\u660e",content:["\u8bf7\u5728\u5b89\u9759\u7684\u73af\u5883\u4e2d\u8fdb\u884c\u6d4b\u8bd5\uff1b","\u8bf7\u5141\u8bb8\u5f55\u97f3\u6743\u9650\uff08\u5982\u679c\u6709\u76f8\u5e94\u7684\u5f39\u7a97\uff09\uff1b","\u8bf7\u70b9\u51fb\u201c\u5f55\u97f3\u201d\u6309\u94ae\u5e76\u8bfb\u51fa\u5f53\u524d\u5448\u73b0\u7684\u5355\u8bcd\uff0c\u8bfb\u5b8c\u5355\u8bcd\u540e\uff0c\u518d\u6b21\u70b9\u51fb\u201c\u5f55\u97f3\u201d\u6309\u94ae\u505c\u6b62\u5f55\u97f3\u3002","\u8bf7\u7528\u60a8\u7684\u6bcd\u8bed\u8f93\u5165\u5f53\u524d\u5355\u8bcd\u7684\u610f\u601d\uff1b","\u6bcf\u9053\u9898\u76ee\u9650\u65f615\u79d2\uff1b","\u5b8c\u6210\u6bcf\u9053\u9898\u76ee\u540e\uff0c\u8bf7\u70b9\u51fb \u201cNEXT\u201d \u6309\u94ae\uff1b","\u5982\u679c\u60a8\u4e0d\u8ba4\u8bc6\u5f53\u524d\u9898\u76ee\u7684\u5355\u8bcd\uff0c\u8bf7\u76f4\u63a5\u70b9\u51fb \u201cNEXT\u201d \u6309\u94ae\uff1b","\u8bf7\u4e0d\u8981\u67e5\u9605\u8bcd\u5178\u548c\u6559\u79d1\u4e66\uff0c\u4e5f\u4e0d\u8981\u5728\u7f51\u4e0a\u641c\u7d22\u9898\u76ee\u4e2d\u7684\u5355\u8bcd\uff1b","\u8bd5\u5377\u5b8c\u6210\u524d\u8bf7\u52ff\u9000\u51fa\u3002"],endings:["\u6240\u63d0\u4f9b\u7684\u4fe1\u606f\u5c06\u4e25\u683c\u4fdd\u5bc6\uff0c\u4e0d\u4f1a\u5411\u7b2c\u4e09\u65b9\u62ab\u9732\u3002","\u6211\u4eec\u4e0d\u4f1a\u5411\u60a8\u53d1\u9001\u4efb\u4f55\u4e0d\u76f8\u5173\u7684\u4fe1\u606f\u3002","\u611f\u8c22\u60a8\u7684\u53c2\u4e0e\uff01"],button:"\u540c\u610f\u5e76\u5f00\u59cb"}],Wa=Object(_.a)((function(){return{select:{float:"right",position:"relative",bottom:6,width:43},select_icon:{float:"right",marginRight:4},button:{marginTop:30},button_focused:{marginTop:30,color:"green",fontSize:18,fontWeight:"bold"}}})),Aa=128,Ba=16e3,Da=function(e){var t=Wa(),a=Object(n.useState)(!1),i=Object(g.a)(a,2),o=i[0],c=i[1],l=Object(n.useState)(!1),s=Object(g.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)(0),p=Object(g.a)(m,2),f=p[0],h=p[1],b=F()({type:"mp3",bitRate:Aa,sampleRate:Ba,disableEnvInFix:!1}),E=function(){c(!0)},y=function(){c(!1)};Object(n.useEffect)((function(){console.log("\u6b63\u5728\u6253\u5f00\u5f55\u97f3\uff0c\u8bf7\u6c42\u9ea6\u514b\u98ce\u6743\u9650..."),b.open((function(){console.log("\u5df2\u6253\u5f00\u5f55\u97f3\uff0c\u53ef\u4ee5\u70b9\u51fb\u5f00\u59cb\u4e86"),b.close(),d(!0)}),(function(e,t){console.log((t?"UserNotAllow\uff0c":"")+"\u65e0\u6cd5\u5f55\u97f3:"+e)}))}),[]);var x={style:{listStyle:"disc"}},w=function(e){h(e.target.value)};return r.a.createElement(T.a,{maxWidth:"xs"},r.a.createElement(S.a,{component:"h1",variant:"h5",style:{marginTop:30}},Pa[f].title,r.a.createElement(r.a.Fragment,null,r.a.createElement(ea.a,{onChange:w,value:f,className:t.select,renderValue:function(e){return Pa[e].abbr}},Pa.map((function(e,t){return r.a.createElement(pa.a,{key:"sel"+t,value:t},e.lang)}))),r.a.createElement(Ia.a,{className:t.select_icon}))),r.a.createElement(ve.a,null),r.a.createElement("ul",{style:{marginTop:40}},Pa[f].content.map((function(e,t){return r.a.createElement("li",Object.assign({},x,{key:"ins"+t}),e)}))),Pa[f].endings.map((function(e,t){return r.a.createElement("li",{key:"end"+t},r.a.createElement(S.a,{component:"span",variant:"body1"},e))})),r.a.createElement(v.a,{className:o?t.button_focused:t.button,fullWidth:!0,disabled:!u,variant:"outlined",onClick:function(){e.history.push("/examination")},onMouseEnter:E,onMouseLeave:y,onFocus:E,onBlur:y},Pa[f].button))},za=Object(n.lazy)((function(){return a.e(3).then(a.bind(null,865))})),qa=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.d,null,r.a.createElement(h.a,{exact:!0,from:"/",to:"/info"}),r.a.createElement(h.b,{path:"/info"},r.a.createElement(q,this.props)),r.a.createElement(h.b,{path:"/instruction"},r.a.createElement(Da,this.props)),r.a.createElement(h.b,{path:"/examination",component:he}),r.a.createElement(h.b,{path:"/finish",component:be}),r.a.createElement(h.a,{exact:!0,from:"/admin",to:"/admin/login"}),r.a.createElement(h.b,{path:"/admin/login",component:za}),r.a.createElement(h.b,{path:"/admin/dashboard"},r.a.createElement(Ge,Object.assign({components:Mt},this.props))),r.a.createElement(h.b,{path:"/admin/users",exact:!0},r.a.createElement(Ge,Object.assign({components:ma},this.props))),r.a.createElement(h.b,{path:"/admin/users/:paper_id/:uid"},r.a.createElement(Ge,Object.assign({components:Ra},this.props))),r.a.createElement(h.b,{path:"/admin/papers"},r.a.createElement(Ge,Object.assign({components:_a},this.props))),r.a.createElement(h.b,{path:"/admin/settings"},r.a.createElement(Ge,Object.assign({components:Ea},this.props)))))}}]),a}(r.a.Component),La=(a(470),Object(d.a)()),Ua=new p.RouterStore,Fa=Object(p.syncHistoryWithStore)(La,Ua),Ma=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(y.a,null),r.a.createElement(I.a,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),r.a.createElement(m.a,f,r.a.createElement(h.c,{history:Fa},r.a.createElement(h.b,{component:qa}))))}}]),a}(r.a.Component);o.a.render(r.a.createElement(Ma,null),document.getElementById("root"))}},[[463,1,2]]]);
//# sourceMappingURL=main.0b407512.chunk.js.map