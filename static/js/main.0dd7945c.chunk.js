(this.webpackJsonpwc=this.webpackJsonpwc||[]).push([[0],{60:function(e,t,n){e.exports=n(93)},65:function(e,t,n){},66:function(e,t,n){},71:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),c=n(21),s=n.n(c),i=(n(65),n(66),n(16)),u=n(22),l=n(25),p=n(23),d=n(19),m=n(36),f=n(37),h=new function e(){Object(i.a)(this,e)},b=n(119),v=(n(71),n(20)),g=n.n(v),w=n(28),y=n(50),E=n(40),j=n.n(E),O=function(){var e=Object(w.a)(g.a.mark((function e(t,n){var a,o,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:o=e.sent,r=o.data,a={success:!!n||r.success,info:r.msg,data:n?r:r.data},e.next=15;break;case 8:if(e.prev=8,e.t0=e.catch(0),c=e.t0.response.data,403!==e.t0.response.status){e.next=14;break}return setTimeout((function(){sessionStorage.clear(),window.location.replace("/login")}),2e3),e.abrupt("return",{info:"Your login information is invalid, please login again!",success:!1});case 14:a={success:c.success,info:c.err_msg,data:c};case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),k=function e(t){var n=this;Object(i.a)(this,e),this.request=void 0,this.down=void 0,this.download=Object(w.a)(g.a.mark((function e(){var t,a,o,r=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,O((function(){return n.request.post(t,a,{responseType:"blob"})}),"down");case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),this.post=Object(w.a)(g.a.mark((function e(){var t,a,o,r=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",a=r.length>1?r[1]:void 0,e.next=4,O((function(){return n.request.post(t,a)}));case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),this.uploadAudio=function(e){return n.post("/api/upload",e)},this.request=t.http,this.down=t.down},S=(a=function(){var e={baseURL:"",headers:{"Content-Type":"application/json",Token:sessionStorage.getItem("token")}};return{http:j.a.create(e),down:j.a.create(Object(y.a)({},e,{responseType:"blob"}))}}(),new k(a)),x=n(33),T=n.n(x),C=(n(72),n(73),n(74),n(113)),D=n(32),R=n(114),F=n(115),I=n(116),U=n(117),z=n(118),A=Object(C.a)((function(e){return{root:{display:"flex",alignItems:"center"},wrapper:{margin:e.spacing(1),position:"relative"},buttonSuccess:{backgroundColor:D.a[500],"&:hover":{backgroundColor:D.a[700]}},fabProgress:{color:D.a[500],position:"absolute",top:-6,left:-6,zIndex:1},buttonProgress:{color:D.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})),L=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).rec=T()({type:"mp3",bitRate:128,sampleRate:16e3,disableEnvInFix:!1,onProcess:function(e,t,n,o){a.wave.input(e[e.length-1],t,o)}}),a.renderVisualization=function(e){return r.a.createElement(R.a,{style:{height:"50px"},className:"wave-box"})},a.uploadFile=function(e){var t=new FormData;t.append("record",e),S.uploadAudio(t).then((function(e){console.log("resp",e)}))},a.uploadFile2=function(e,t){var n=new FormData;n.append("record",e,t+".mp3"),S.uploadAudio(n).then((function(e){console.log("resp",e)}))},a.recStart=function(e){if(e||(e=function(e){e&&console.log(e,1)}),a.rec&&T.a.IsOpen()){a.rec.start();var t=a.rec.set;console.log("\u5f55\u5236\u4e2d\uff1a"+t.type+" "+t.sampleRate+"hz "+t.bitRate+"kbps")}else e("\u672a\u6253\u5f00\u5f55\u97f3")},a.mouseDown=function(){a.setState({status:"recording"}),a.recStart(),document.onmouseup=a.touchUp},a.touchUp=function(){a.setState({status:"stopped"}),a.recStop()},a.touchDown=function(){a.setState({status:"recording"}),a.recStart()},a.playAndStop=function(){a.refs.audio.play()},a.state={rec:null,status:"init",src:""},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=setTimeout((function(){console.log("\u65e0\u6cd5\u5f55\u97f3\uff1a\u6743\u9650\u8bf7\u6c42\u88ab\u5ffd\u7565\uff08\u8d85\u65f6\u5047\u88c5\u624b\u52a8\u70b9\u51fb\u4e86\u786e\u8ba4\u5bf9\u8bdd\u6846\uff09",1)}),8e3);console.log("\u6b63\u5728\u6253\u5f00\u5f55\u97f3\uff0c\u8bf7\u6c42\u9ea6\u514b\u98ce\u6743\u9650..."),this.rec.open((function(){clearTimeout(t),console.log("\u5df2\u6253\u5f00\u5f55\u97f3\uff0c\u53ef\u4ee5\u70b9\u51fb\u5f00\u59cb\u4e86",2),e.wave=T.a.WaveView({elem:".wave-box"})}),(function(e,n){clearTimeout(t),console.log((n?"UserNotAllow\uff0c":"")+"\u65e0\u6cd5\u5f55\u97f3:"+e,1)}))}},{key:"recStop",value:function(){var e=this;this.rec.stop((function(t,n){e.uploadFile2(t,n),e.setState({src:window.URL.createObjectURL(t)},(function(){console.log("src",e.state.src)}))}),(function(e){console.log("\u5f55\u97f3\u5931\u8d25:"+e,1)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.status,a=(t.loadings,t.src),o="recording"===n;return r.a.createElement(F.a,{maxWidth:"sm"},r.a.createElement("div",null,r.a.createElement(I.a,{type:"primary",onClick:function(){return e.recStart()}},"New Start"),r.a.createElement(I.a,{type:"primary",onClick:function(){return e.recStop()}},"New Stop")),r.a.createElement(U.a,{container:!0,spacing:2,className:A.wrapper,alignItems:"center"},r.a.createElement(U.a,{item:!0,xs:3},r.a.createElement(z.a,{variant:"extended",onMouseDown:this.mouseDown,onTouchStart:this.touchDown,onTouchEnd:this.touchUp,size:"medium",color:o?"default":"primary"},o?"\u677e\u5f00\u7ed3\u675f":"\u6309\u4f4f\u5f55\u97f3")),r.a.createElement(U.a,{item:!0,xs:6},this.renderVisualization()),r.a.createElement(U.a,{item:!0,xs:3,alignContent:"center"},r.a.createElement(I.a,{color:"secondary",variant:"contained",onClick:this.playAndStop},"Play")),r.a.createElement("audio",{controls:!0,ref:"audio",src:a,style:{display:"block"}})))}}]),n}(o.Component),N=Object(o.lazy)((function(){return Promise.all([n.e(2),n.e(4)]).then(n.bind(null,368))})),P=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.c,null,r.a.createElement(b.a,{path:"/",component:L}),r.a.createElement(b.a,{path:"/login",component:N})))}}]),n}(r.a.Component),q=n(111),V=Object(d.a)(),W=new f.RouterStore,J=Object(f.syncHistoryWithStore)(V,W),M=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(o.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(q.a,null),r.a.createElement(m.a,h,r.a.createElement(b.b,{history:J},r.a.createElement(b.a,{component:P}))))}}]),n}(r.a.Component);s.a.render(r.a.createElement(M,null),document.getElementById("root"))}},[[60,1,3]]]);
//# sourceMappingURL=main.0dd7945c.chunk.js.map