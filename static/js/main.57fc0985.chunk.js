(this.webpackJsonpwc=this.webpackJsonpwc||[]).push([[0],{110:function(e,t,n){e.exports=n(185)},115:function(e,t,n){},116:function(e,t,n){},122:function(e,t,n){},185:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),c=n(28),i=n.n(c),u=(n(115),n(116),n(7)),s=n(25),l=n(27),p=n(26),d=n(9),f=n(101),m=n(65),h=new function e(){Object(u.a)(this,e)},v=n(187),b=(n(104),n(45)),g=n(71),w=(n(122),n(123),n(15)),y=n.n(w),O=n(33),j=n(100),E=n(69),k=n.n(E),S=function(){var e=Object(O.a)(y.a.mark((function e(t,n){var a,o,r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:o=e.sent,r=o.data,a={success:!!n||r.success,info:r.msg,data:n?r:r.data},e.next=15;break;case 8:if(e.prev=8,e.t0=e.catch(0),c=e.t0.response.data,403!==e.t0.response.status){e.next=14;break}return setTimeout((function(){sessionStorage.clear(),window.location.replace("/login")}),2e3),e.abrupt("return",{info:"Your login information is invalid, please login again!",success:!1});case 14:a={success:c.success,info:c.err_msg,data:c};case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),x=function e(t){var n=this;Object(u.a)(this,e),this.request=void 0,this.down=void 0,this.download=Object(O.a)(y.a.mark((function e(){var t,a,o,r=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,S((function(){return n.request.post(t,a,{responseType:"blob"})}),"down");case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),this.post=Object(O.a)(y.a.mark((function e(){var t,a,o,r=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",a=r.length>1?r[1]:void 0,e.next=4,S((function(){return n.request.post(t,a)}));case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),this.uploadAudio=function(e){return n.post("/api/upload",e)},this.request=t.http,this.down=t.down},T=(a=function(){var e={baseURL:"",headers:{"Content-Type":"application/json",Token:sessionStorage.getItem("token")}};return{http:k.a.create(e),down:k.a.create(Object(j.a)({},e,{responseType:"blob"}))}}(),new x(a)),C=n(68),F=n.n(C),A=(n(124),n(125),function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).rec=F()({type:"mp3",bitRate:128,sampleRate:16e3,disableEnvInFix:!1,onProcess:function(e,t,n,a){}}),a.enterLoading=function(e){a.setState((function(t){var n=t.loadings,a=Object(g.a)(n);return a[e]=!0,{loadings:a}})),setTimeout((function(){a.setState((function(t){var n=t.loadings,a=Object(g.a)(n);return a[e]=!1,{loadings:a,status:"inactive"}}))}),5e3)},a.uploadFile=function(e){var t=new FormData;t.append("record",e),T.uploadAudio(t).then((function(e){console.log("resp",e)}))},a.uploadFile2=function(e,t){var n=new FormData;n.append("record",e,t+".mp3"),T.uploadAudio(n).then((function(e){console.log("resp",e)}))},a.recStart=function(e){if(e||(e=function(e){e&&console.log(e,1)}),a.rec&&F.a.IsOpen()){a.rec.start();var t=a.rec.set;console.log("\u5f55\u5236\u4e2d\uff1a"+t.type+" "+t.sampleRate+"hz "+t.bitRate+"kbps")}else e("\u672a\u6253\u5f00\u5f55\u97f3")},a.state={status:"",loadings:[],rec:null},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=setTimeout((function(){console.log("\u65e0\u6cd5\u5f55\u97f3\uff1a\u6743\u9650\u8bf7\u6c42\u88ab\u5ffd\u7565\uff08\u8d85\u65f6\u5047\u88c5\u624b\u52a8\u70b9\u51fb\u4e86\u786e\u8ba4\u5bf9\u8bdd\u6846\uff09",1)}),8e3);console.log("\u6b63\u5728\u6253\u5f00\u5f55\u97f3\uff0c\u8bf7\u6c42\u9ea6\u514b\u98ce\u6743\u9650..."),this.rec.open((function(){clearTimeout(e),console.log("\u5df2\u6253\u5f00\u5f55\u97f3\uff0c\u53ef\u4ee5\u70b9\u51fb\u5f00\u59cb\u4e86",2)}),(function(t,n){clearTimeout(e),console.log((n?"UserNotAllow\uff0c":"")+"\u65e0\u6cd5\u5f55\u97f3:"+t,1)}))}},{key:"controlAudio",value:function(e){this.setState({status:e})}},{key:"changeScheme",value:function(e){this.setState({audioType:e.target.value})}},{key:"recStop",value:function(){var e=this;this.rec.stop((function(t,n){e.rec.close(),e.uploadFile2(t,n),e.rec=null}),(function(t){console.log("\u5f55\u97f3\u5931\u8d25:"+t,1),e.rec.close(),e.rec=null}))}},{key:"render",value:function(){var e=this,t=this.state,n=(t.status,t.audioSrc,t.audioType),a=t.loadings;return r.a.createElement("div",null,r.a.createElement(b.a,{type:"primary",loading:a[1],onClick:function(){e.enterLoading(1),e.controlAudio("recording")}},"Old"),r.a.createElement(b.a,{type:"primary",loading:a[2],onClick:function(){e.enterLoading(2),e.recStart()}},"New Start"),r.a.createElement(b.a,{type:"primary",loading:a[3],onClick:function(){e.enterLoading(3),e.recStop()}},"New Stop"),r.a.createElement("p",null,"choose output type"),r.a.createElement("select",{name:"",id:"",onChange:function(t){return e.changeScheme(t)},value:n},r.a.createElement("option",{value:"audio/webm"},"audio/webm\uff08default\uff09"),r.a.createElement("option",{value:"audio/wav"},"audio/wav"),r.a.createElement("option",{value:"audio/mp3"},"audio/mp3")))}}]),n}(o.Component)),L=Object(o.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,321))})),R=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.d,null,r.a.createElement(v.a,{exact:!0,from:"/",to:"/login"}),r.a.createElement(v.b,{path:"/login",component:L}),r.a.createElement(v.b,{path:"/demo",component:A})))}}]),n}(r.a.Component),q=Object(d.a)(),I=new m.RouterStore,D=Object(m.syncHistoryWithStore)(q,I),N=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement(o.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(f.a,h,r.a.createElement(v.c,{history:D},r.a.createElement(v.b,{component:R}))))}}]),n}(r.a.Component);i.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[110,1,2]]]);
//# sourceMappingURL=main.57fc0985.chunk.js.map