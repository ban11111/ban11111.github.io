{"version":3,"sources":["api/index.ts","stores/root.ts","api/req.ts","containers/demo/index.js","containers/info/index.tsx","routes/index.tsx","App.tsx","index.tsx"],"names":["request","wrapSend","requestFunc","type","a","res","data","response","success","info","msg","status","setTimeout","sessionStorage","clear","window","location","replace","err_msg","Api","down","download","url","body","post","responseType","uploadAudio","payload","this","http","getAPI","common","baseURL","headers","Token","getItem","axios","create","createRequest","useStyles","makeStyles","theme","root","display","alignItems","word","fontSize","fontFamily","fontWeight","wrapper","margin","spacing","position","buttonSuccess","backgroundColor","green","fabProgress","color","top","left","zIndex","buttonProgress","marginTop","marginLeft","Word","styled","Paper","justifyContent","ValidationTextField","withStyles","borderColor","borderWidth","borderLeftWidth","padding","TextField","Progress","MobileStepper","maxWidth","flexGrow","defaultAudioConf","bitRate","sampleRate","Index","props","rec","Recorder","disableEnvInFix","onProcess","buffers","powerLevel","bufferDuration","bufferSampleRate","wave","input","length","renderVisualization","style","height","className","timeoutFn","console","log","uploadFile","blob","duration","formData","FormData","append","api","then","resp","recStart","state","audioConf","open","clearTimeout","start","set","isUserNotAllow","mouseDown","setState","document","onmouseup","touchUp","recStop","touchDown","playAndStop","refs","audio","play","onClickNext","wordIndex","onClickBack","updateAudioConf","src","words","WaveView","elem","close","stop","URL","createObjectURL","currentWord","recording","Container","Grid","container","item","xs","Fab","variant","onMouseDown","onTouchStart","onTouchEnd","size","Button","onClick","controls","ref","label","required","fullWidth","id","steps","activeStep","nextButton","disabled","ThemeProvider","direction","KeyboardArrowLeft","KeyboardArrowRight","backButton","InputLabel","Select","labelId","value","onChange","v","target","MenuItem","InputLabelProps","shrink","Component","Copyright","Typography","align","Link","href","Date","getFullYear","createStyles","paper","flexDirection","avatar","palette","secondary","main","form","width","submit","InfoPage","p","classes","component","CssBaseline","Avatar","noValidate","sm","autoComplete","name","autoFocus","FormControlLabel","control","Checkbox","history","push","justify","Box","mt","LoginContainer","lazy","Routes","exact","from","to","path","DemoPage","React","browserHistory","createBrowserHistory","routingStore","RouterStore","syncHistoryWithStore","App","fallback","RootStore","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.835fc0f6.chunk.js","sourcesContent":["// 放所有 http 请求\nimport {AxiosInstance} from 'axios'\nimport {ReqType, wrapSend, Response, createRequest} from \"./req\";\n\n\n\nexport class Api {\n    request: AxiosInstance  // 普通请求\n    down: AxiosInstance     // 下载请求\n\n    constructor(request: ReqType) {\n        this.request = request.http\n        this.down = request.down\n    }\n\n    private download = async <T = any>(url = '', body: any = {}) => {\n        const res = await wrapSend<T>(() => {\n            return this.request.post<Response>(url, body, {responseType: 'blob'})\n        }, 'down')\n        return res\n    }\n\n    private post = async <T = any>(url = '', body?: any) => {\n        const res = await wrapSend<T>(() => {\n            return this.request.post<Response>(url, body)\n        })\n        return res\n    }\n\n    // 上传音频文件\n    uploadAudio = (payload: any) => {\n        return this.post(`/api/upload`, payload)\n    }\n}\n\nconst getAPI = (request: ReqType) => new Api(request)\n\nexport default getAPI(createRequest())","class Root {}\n\nexport default new Root()\n","import axios, {AxiosInstance, AxiosPromise} from \"axios\";\r\n\r\n\r\nexport interface ReqType {\r\n    http: AxiosInstance\r\n    down: AxiosInstance\r\n}\r\n\r\nexport interface Response {\r\n    success: boolean\r\n    msg?: string\r\n    data: any\r\n}\r\n\r\nexport interface Res<T> {\r\n    success: boolean\r\n    info: string\r\n    data?: T\r\n}\r\n\r\ntype requestFun = () => AxiosPromise<Response>\r\n\r\nexport const createRequest = (): ReqType => {\r\n    const common = {\r\n        baseURL: '',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            Token: sessionStorage.getItem('token')\r\n        }\r\n    }\r\n    // 设置请求拦截，在请求头中添加产品名称\r\n    const instance = axios.create(common)\r\n    return {\r\n        http: instance,\r\n        down: axios.create({ ...common, responseType: 'blob' })\r\n    }\r\n}\r\n\r\n\r\nexport const wrapSend = async <T>(requestFunc: requestFun, type?: string): Promise<Res<T>> => {\r\n    let response\r\n    try {\r\n        const res = await requestFunc()\r\n        const {data} = res\r\n        response = {\r\n            success: type ? true : data.success,\r\n            info: data.msg,\r\n            data: type ? data : data.data\r\n        }\r\n    } catch (err) {\r\n        const {data} = err.response\r\n        if (err.response.status === 403) {\r\n            setTimeout(() => {\r\n                sessionStorage.clear()\r\n                window.location.replace('/login')\r\n            }, 2000)\r\n            return {\r\n                info: 'Your login information is invalid, please login again!',\r\n                success: false\r\n            }\r\n        }\r\n        response = {\r\n            success: data.success,\r\n            info: data.err_msg,\r\n            data: data\r\n        }\r\n    }\r\n    return response\r\n}","import React, { Component } from 'react'\r\nimport './index.css'\r\nimport api from '../../api'\r\n\r\nimport Recorder from 'recorder-core'\r\nimport 'recorder-core/src/engine/mp3'\r\nimport 'recorder-core/src/engine/mp3-engine'\r\nimport 'recorder-core/src/extensions/waveview'\r\n\r\nimport { makeStyles, styled, ThemeProvider, withStyles } from '@material-ui/core/styles'\r\nimport { green } from '@material-ui/core/colors'\r\n// import CircularProgress from '@material-ui/core/CircularProgress'\r\nimport {\r\n    Fab,\r\n    Button,\r\n    Container,\r\n    Grid,\r\n    Paper,\r\n    Input,\r\n    MobileStepper,\r\n    TextField,\r\n    InputLabel,\r\n    Select, MenuItem\r\n} from '@material-ui/core'\r\nimport { KeyboardArrowLeft, KeyboardArrowRight } from '@material-ui/icons'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n    alignItems: 'center'\r\n  },\r\n  word: {\r\n    fontSize: 'x-large',\r\n    fontFamily: 'monospace',\r\n    fontWeight: 'bold'\r\n  },\r\n  wrapper: {\r\n    margin: theme.spacing(1),\r\n    position: 'relative'\r\n  },\r\n  buttonSuccess: {\r\n    backgroundColor: green[500],\r\n    '&:hover': {\r\n      backgroundColor: green[700]\r\n    }\r\n  },\r\n  fabProgress: {\r\n    color: green[500],\r\n    position: 'absolute',\r\n    top: -6,\r\n    left: -6,\r\n    zIndex: 1\r\n  },\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    marginTop: -12,\r\n    marginLeft: -12\r\n  }\r\n}))\r\n\r\nconst Word = styled(Paper)({\r\n  fontSize: 'xxx-large',\r\n  fontFamily: 'cursive',\r\n  fontWeight: 'bold',\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  justifyContent: 'center'\r\n})\r\n\r\nconst ValidationTextField = withStyles({\r\n  root: {\r\n    marginTop: 15,\r\n    '& input:valid + fieldset': {\r\n      borderColor: 'green',\r\n      borderWidth: 2\r\n    },\r\n    '& input:invalid + fieldset': {\r\n      borderColor: 'lightBlue',\r\n      borderWidth: 2\r\n    },\r\n    '& input:valid:focus + fieldset': {\r\n      borderLeftWidth: 6,\r\n      padding: '4px !important' // override inline-style\r\n    }\r\n  }\r\n})(TextField)\r\n\r\nconst Progress = styled(MobileStepper)({\r\n  root: {\r\n    maxWidth: 400,\r\n    flexGrow: 1\r\n  }\r\n})\r\n\r\nconst defaultAudioConf = {\r\n  bitRate: 128, // kbps\r\n  sampleRate: 16000 // hz\r\n}\r\n\r\nexport default class Index extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      rec: null,\r\n      status: 'init',\r\n      src: '',\r\n      audioConf: defaultAudioConf,\r\n      wordIndex: 0,\r\n      words: ['要读的字', '字2', '字3', '后面会在', '管理页面开放配置']\r\n    }\r\n  }\r\n\r\n  wave\r\n  rec = Recorder({\r\n    type: 'mp3',\r\n    bitRate: defaultAudioConf.bitRate,\r\n    sampleRate: defaultAudioConf.sampleRate,\r\n    disableEnvInFix: false,\r\n    onProcess: (buffers, powerLevel, bufferDuration, bufferSampleRate) => {\r\n      this.wave.input(buffers[buffers.length - 1], powerLevel, bufferSampleRate) //输入音频数据，更新显示波形\r\n    }\r\n  })\r\n\r\n  renderVisualization = () => {\r\n    return <div style={{ height: '50px' }} className=\"wave-box\" />\r\n  }\r\n\r\n  timeoutFn = setTimeout(() => {\r\n    console.log('无法录音：权限请求被忽略（超时假装手动点击了确认对话框）', 1)\r\n  }, 10000)\r\n\r\n  componentDidMount() {\r\n    console.log('正在打开录音，请求麦克风权限...')\r\n    this.rec.open(\r\n      () => {\r\n        clearTimeout(this.timeoutFn)\r\n        console.log('已打开录音，可以点击开始了', 2)\r\n        this.wave = Recorder.WaveView({ elem: '.wave-box' }) // 创建wave对象\r\n        this.rec.close()\r\n      },\r\n      (msg, isUserNotAllow) => {\r\n        //用户拒绝未授权或不支持\r\n        clearTimeout(this.timeoutFn)\r\n        console.log((isUserNotAllow ? 'UserNotAllow，' : '') + '无法录音:' + msg, 1)\r\n      }\r\n    )\r\n  }\r\n\r\n  uploadFile = (blob, duration) => {\r\n    const formData = new FormData()\r\n    formData.append('record', blob, duration + '.mp3')\r\n    api.uploadAudio(formData).then(resp => {\r\n      console.log('resp', resp)\r\n    })\r\n  }\r\n\r\n  recStart = () => {\r\n    // if (this.rec && this.rec.IsOpen()) {\r\n    //   this.rec.close()\r\n    // }\r\n    this.rec = Recorder({\r\n      type: 'mp3',\r\n      bitRate: this.state.audioConf.bitRate,\r\n      sampleRate: this.state.audioConf.sampleRate,\r\n      disableEnvInFix: false,\r\n      onProcess: (buffers, powerLevel, bufferDuration, bufferSampleRate) => {\r\n        this.wave.input(buffers[buffers.length - 1], powerLevel, bufferSampleRate) //输入音频数据，更新显示波形\r\n      }\r\n    })\r\n    this.rec.open(\r\n      () => {\r\n        clearTimeout(this.timeoutFn)\r\n        this.rec.start()\r\n        const set = this.rec.set\r\n        console.log('录制中：' + set.type + ' ' + set.sampleRate + 'hz ' + set.bitRate + 'kbps')\r\n      },\r\n      (msg, isUserNotAllow) => {\r\n        clearTimeout(this.timeoutFn)\r\n        console.log((isUserNotAllow ? 'UserNotAllow，' : '') + '无法录音:' + msg, 1)\r\n      }\r\n    )\r\n  }\r\n\r\n  mouseDown = () => {\r\n    this.setState({ status: 'recording' })\r\n    this.recStart()\r\n    document.onmouseup = this.touchUp\r\n  }\r\n\r\n  touchUp = () => {\r\n    this.setState({ status: 'stopped' }, () => {\r\n      document.onmouseup = null\r\n    })\r\n    this.recStop()\r\n  }\r\n\r\n  touchDown = () => {\r\n    this.setState({ status: 'recording' })\r\n    this.recStart()\r\n  }\r\n\r\n  recStop() {\r\n    this.rec.stop(\r\n      (blob, duration) => {\r\n        this.rec.close() //释放录音资源，当然可以不释放，后面可以连续调用start；但不释放时手机端播放音频有杂音\r\n        this.uploadFile(blob, duration)\r\n        this.setState({ src: window.URL.createObjectURL(blob) }, () => {\r\n          console.log('src', this.state.src)\r\n        })\r\n        // this.rec = null\r\n      },\r\n      msg => {\r\n        console.log('录音失败:' + msg, 1)\r\n        this.rec.close() //可以通过stop方法的第3个参数来自动调用close\r\n        // this.rec = null\r\n      }\r\n    )\r\n  }\r\n\r\n  playAndStop = () => {\r\n    this.refs.audio.play()\r\n  }\r\n\r\n  onClickNext = () => {\r\n    this.setState({ wordIndex: this.state.wordIndex + 1 })\r\n  }\r\n  onClickBack = () => {\r\n    this.setState({ wordIndex: this.state.wordIndex - 1 })\r\n  }\r\n\r\n  updateAudioConf = (sampleRate, bitRate) => {\r\n    this.setState({ audioConf: { sampleRate: sampleRate, bitRate: bitRate } })\r\n  }\r\n\r\n  render() {\r\n    const { status, src, words, wordIndex, audioConf } = this.state\r\n    const currentWord = words[wordIndex]\r\n    const recording = status === 'recording'\r\n    return (\r\n      <Container maxWidth=\"sm\">\r\n        <div>\r\n          <Word>{currentWord}</Word>\r\n        </div>\r\n        <Grid container spacing={2} className={useStyles.wrapper} alignItems={'center'}>\r\n          <Grid item xs={2}>\r\n            <Fab\r\n              variant=\"extended\"\r\n              onMouseDown={this.mouseDown}\r\n              onTouchStart={this.touchDown}\r\n              onTouchEnd={this.touchUp}\r\n              size=\"medium\"\r\n              color={recording ? 'default' : 'primary'}\r\n            >\r\n              {recording ? '松开\\n结束' : '按住\\n录音'}\r\n            </Fab>\r\n            {/*{recording && <CircularProgress size={24} className={useStyles.buttonProgress}/>}*/}\r\n          </Grid>\r\n          <Grid item xs={7}>\r\n            {this.renderVisualization()}\r\n          </Grid>\r\n          <Grid item xs={3}>\r\n            <Button color=\"secondary\" variant=\"contained\" onClick={this.playAndStop}>\r\n              Play\r\n            </Button>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <audio controls ref={'audio'} src={src} />\r\n          </Grid>\r\n\r\n          <Grid item xs={12}>\r\n            <ValidationTextField\r\n              label=\"Input translation here\"\r\n              required\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              id=\"validation-outlined-input\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Progress\r\n              variant=\"progress\"\r\n              steps={words.length}\r\n              position=\"static\"\r\n              activeStep={wordIndex}\r\n              nextButton={\r\n                <Button size=\"small\" onClick={this.onClickNext} disabled={wordIndex + 1 >= words.length}>\r\n                  Next\r\n                  {ThemeProvider.direction === 'rtl' ? <KeyboardArrowLeft /> : <KeyboardArrowRight />}\r\n                </Button>\r\n              }\r\n              backButton={\r\n                <Button size=\"small\" onClick={this.onClickBack} disabled={wordIndex === 0}>\r\n                  {ThemeProvider.direction === 'rtl' ? <KeyboardArrowRight /> : <KeyboardArrowLeft />}\r\n                  Back\r\n                </Button>\r\n              }\r\n            />\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <InputLabel>采样率</InputLabel>\r\n            <Select\r\n              labelId=\"demo-simple-select-label\"\r\n              id=\"demo-simple-select\"\r\n              value={audioConf.sampleRate}\r\n              onChange={v => {\r\n                this.updateAudioConf(v.target.value, audioConf.bitRate)\r\n              }}\r\n            >\r\n              <MenuItem value={8000}>8000</MenuItem>\r\n              <MenuItem value={11025}>11025</MenuItem>\r\n              <MenuItem value={16000}>16000</MenuItem>\r\n              <MenuItem value={22050}>22050</MenuItem>\r\n              <MenuItem value={24000}>24000</MenuItem>\r\n              <MenuItem value={44100}>44100</MenuItem>\r\n              <MenuItem value={48000}>44100</MenuItem>\r\n              <MenuItem value={50000}>50000</MenuItem>\r\n              <MenuItem value={96000}>96000</MenuItem>\r\n            </Select>\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <TextField\r\n              label=\"比特率\"\r\n              type=\"number\"\r\n              InputLabelProps={{\r\n                shrink: true\r\n              }}\r\n              variant=\"filled\"\r\n              value={audioConf.bitRate}\r\n              onChange={v => {\r\n                this.updateAudioConf(audioConf.sampleRate, v.target.value)\r\n              }}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport Button from '@material-ui/core/Button'\r\nimport CssBaseline from '@material-ui/core/CssBaseline'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport Link from '@material-ui/core/Link'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Box from '@material-ui/core/Box'\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\nimport Container from '@material-ui/core/Container'\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  )\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    paper: {\r\n      marginTop: theme.spacing(8),\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center'\r\n    },\r\n    avatar: {\r\n      margin: theme.spacing(1),\r\n      backgroundColor: theme.palette.secondary.main\r\n    },\r\n    form: {\r\n      width: '100%', // Fix IE 11 issue.\r\n      marginTop: theme.spacing(3)\r\n    },\r\n    submit: {\r\n      margin: theme.spacing(3, 0, 2)\r\n    }\r\n  })\r\n)\r\n\r\nexport default function InfoPage(p: any) {\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign up\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                autoComplete=\"fname\"\r\n                name=\"firstName\"\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"firstName\"\r\n                label=\"First Name\"\r\n                autoFocus\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"lastName\"\r\n                label=\"Last Name\"\r\n                name=\"lastName\"\r\n                autoComplete=\"lname\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Email Address\"\r\n                name=\"email\"\r\n                autoComplete=\"email\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                autoComplete=\"current-password\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControlLabel\r\n                control={<Checkbox value=\"allowExtraEmails\" color=\"primary\" />}\r\n                label=\"I want to receive inspiration, marketing promotions and updates via email.\"\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick={() => {\r\n              console.log('hook props', p)\r\n              p.props.history.push('/demo')\r\n            }}\r\n          >\r\n            Sign Up\r\n          </Button>\r\n          <Grid container justify=\"flex-end\">\r\n            <Grid item>\r\n              <Link href=\"#\" variant=\"body2\">\r\n                Already have an account? Sign in\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Button\r\n        onClick={() => {\r\n          p.props.history.push('/admin/login')\r\n        }}\r\n      >\r\n        临时转到 管理员Login 页面\r\n      </Button>\r\n      <Box mt={5}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  )\r\n}\r\n","import React, { lazy } from 'react'\r\nimport { Redirect, Route, Switch } from 'react-router-dom'\r\nimport DemoPage from 'containers/demo'\r\nimport InfoPage from 'containers/info'\r\n\r\nconst LoginContainer = lazy(() => import('containers/login'))\r\n\r\nexport class Routes extends React.Component<any> {\r\n  render() {\r\n    return (\r\n      <>\r\n        <Switch>\r\n          <Redirect exact={true} from=\"/\" to=\"/info\" />\r\n          <Route path=\"/info\">\r\n            <InfoPage props={this.props} />\r\n          </Route>\r\n          <Route path=\"/demo\" component={DemoPage} />\r\n          <Redirect exact={true} from=\"/admin\" to=\"/admin/login\" />\r\n          <Route path=\"/admin/login\" component={LoginContainer} />\r\n          <Route path=\"/admin/dashboard\" component={LoginContainer} /> {/*todo*/}\r\n        </Switch>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Routes\r\n","import React, { Suspense } from 'react'\r\nimport { createBrowserHistory } from 'history'\r\nimport { Provider } from 'mobx-react'\r\nimport { RouterStore, syncHistoryWithStore } from 'mobx-react-router'\r\nimport RootStore from './stores/root'\r\nimport { Route, Router } from 'react-router-dom'\r\nimport Routes from './routes'\r\nimport CssBaseline from '@material-ui/core/CssBaseline'\r\n\r\nconst browserHistory = createBrowserHistory()\r\nconst routingStore = new RouterStore()\r\nconst history = syncHistoryWithStore(browserHistory, routingStore)\r\n\r\nclass App extends React.Component {\r\n  public render() {\r\n    return (\r\n      <Suspense fallback={<div>Loading...</div>}>\r\n        <CssBaseline />\r\n        <Provider {...RootStore}>\r\n          <Router history={history}>\r\n            <Route component={Routes} />\r\n          </Router>\r\n        </Provider>\r\n      </Suspense>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport './normalize.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}