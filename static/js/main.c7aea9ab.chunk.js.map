{"version":3,"sources":["api/index.ts","stores/root.ts","api/req.ts","containers/demo/index.js","containers/info/index.tsx","routes/index.tsx","App.tsx","index.tsx"],"names":["request","wrapSend","requestFunc","type","a","res","data","response","success","info","msg","status","setTimeout","sessionStorage","clear","window","location","replace","err_msg","Api","down","download","url","body","post","responseType","uploadAudio","payload","this","http","getAPI","common","baseURL","headers","Token","getItem","axios","create","createRequest","useStyles","makeStyles","theme","root","display","alignItems","wrapper","margin","spacing","position","buttonSuccess","backgroundColor","green","fabProgress","color","top","left","zIndex","buttonProgress","marginTop","marginLeft","Index","props","rec","Recorder","bitRate","sampleRate","disableEnvInFix","onProcess","buffers","powerLevel","bufferDuration","bufferSampleRate","wave","input","length","renderVisualization","Paper","style","height","className","uploadFile","e","formData","FormData","append","api","then","resp","console","log","uploadFile2","blob","duration","recStart","call","IsOpen","start","set","mouseDown","setState","document","onmouseup","touchUp","recStop","touchDown","playAndStop","refs","audio","play","state","src","t","open","clearTimeout","WaveView","elem","isUserNotAllow","stop","URL","createObjectURL","recording","Container","maxWidth","Button","onClick","Grid","container","item","xs","Fab","variant","onMouseDown","onTouchStart","onTouchEnd","size","controls","ref","history","push","Component","Copyright","Typography","align","Link","href","Date","getFullYear","createStyles","paper","flexDirection","avatar","palette","secondary","main","form","width","submit","InfoPage","classes","component","CssBaseline","Avatar","noValidate","sm","TextField","autoComplete","name","required","fullWidth","id","label","autoFocus","FormControlLabel","control","Checkbox","value","justify","Box","mt","LoginContainer","lazy","Routes","exact","from","to","path","DemoPage","React","browserHistory","createBrowserHistory","routingStore","RouterStore","syncHistoryWithStore","App","fallback","RootStore","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.c7aea9ab.chunk.js","sourcesContent":["// 放所有 http 请求\nimport {AxiosInstance} from 'axios'\nimport {ReqType, wrapSend, Response, createRequest} from \"./req\";\n\n\n\nexport class Api {\n    request: AxiosInstance  // 普通请求\n    down: AxiosInstance     // 下载请求\n\n    constructor(request: ReqType) {\n        this.request = request.http\n        this.down = request.down\n    }\n\n    private download = async <T = any>(url = '', body: any = {}) => {\n        const res = await wrapSend<T>(() => {\n            return this.request.post<Response>(url, body, {responseType: 'blob'})\n        }, 'down')\n        return res\n    }\n\n    private post = async <T = any>(url = '', body?: any) => {\n        const res = await wrapSend<T>(() => {\n            return this.request.post<Response>(url, body)\n        })\n        return res\n    }\n\n    // 上传音频文件\n    uploadAudio = (payload: any) => {\n        return this.post(`/api/upload`, payload)\n    }\n}\n\nconst getAPI = (request: ReqType) => new Api(request)\n\nexport default getAPI(createRequest())","class Root {}\n\nexport default new Root()\n","import axios, {AxiosInstance, AxiosPromise} from \"axios\";\r\n\r\n\r\nexport interface ReqType {\r\n    http: AxiosInstance\r\n    down: AxiosInstance\r\n}\r\n\r\nexport interface Response {\r\n    success: boolean\r\n    msg?: string\r\n    data: any\r\n}\r\n\r\nexport interface Res<T> {\r\n    success: boolean\r\n    info: string\r\n    data?: T\r\n}\r\n\r\ntype requestFun = () => AxiosPromise<Response>\r\n\r\nexport const createRequest = (): ReqType => {\r\n    const common = {\r\n        baseURL: '',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            Token: sessionStorage.getItem('token')\r\n        }\r\n    }\r\n    // 设置请求拦截，在请求头中添加产品名称\r\n    const instance = axios.create(common)\r\n    return {\r\n        http: instance,\r\n        down: axios.create({ ...common, responseType: 'blob' })\r\n    }\r\n}\r\n\r\n\r\nexport const wrapSend = async <T>(requestFunc: requestFun, type?: string): Promise<Res<T>> => {\r\n    let response\r\n    try {\r\n        const res = await requestFunc()\r\n        const {data} = res\r\n        response = {\r\n            success: type ? true : data.success,\r\n            info: data.msg,\r\n            data: type ? data : data.data\r\n        }\r\n    } catch (err) {\r\n        const {data} = err.response\r\n        if (err.response.status === 403) {\r\n            setTimeout(() => {\r\n                sessionStorage.clear()\r\n                window.location.replace('/login')\r\n            }, 2000)\r\n            return {\r\n                info: 'Your login information is invalid, please login again!',\r\n                success: false\r\n            }\r\n        }\r\n        response = {\r\n            success: data.success,\r\n            info: data.err_msg,\r\n            data: data\r\n        }\r\n    }\r\n    return response\r\n}","import React, { Component } from 'react'\r\nimport './index.css'\r\nimport api from '../../api'\r\n\r\nimport Recorder from 'recorder-core'\r\nimport 'recorder-core/src/engine/mp3'\r\nimport 'recorder-core/src/engine/mp3-engine'\r\nimport 'recorder-core/src/extensions/waveview'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { green } from '@material-ui/core/colors'\r\n// import CircularProgress from '@material-ui/core/CircularProgress'\r\nimport { Fab, Button, Container, Grid, Paper } from '@material-ui/core'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n    alignItems: 'center'\r\n  },\r\n  wrapper: {\r\n    margin: theme.spacing(1),\r\n    position: 'relative'\r\n  },\r\n  buttonSuccess: {\r\n    backgroundColor: green[500],\r\n    '&:hover': {\r\n      backgroundColor: green[700]\r\n    }\r\n  },\r\n  fabProgress: {\r\n    color: green[500],\r\n    position: 'absolute',\r\n    top: -6,\r\n    left: -6,\r\n    zIndex: 1\r\n  },\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    marginTop: -12,\r\n    marginLeft: -12\r\n  }\r\n}))\r\n\r\nexport default class Index extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      rec: null,\r\n      status: 'init',\r\n      src: ''\r\n    }\r\n  }\r\n\r\n  wave\r\n  rec = Recorder({\r\n    type: 'mp3',\r\n    bitRate: 128,\r\n    sampleRate: 16000,\r\n    disableEnvInFix: false,\r\n    onProcess: (buffers, powerLevel, bufferDuration, bufferSampleRate) => {\r\n      this.wave.input(buffers[buffers.length - 1], powerLevel, bufferSampleRate) //输入音频数据，更新显示波形\r\n    }\r\n  })\r\n\r\n  renderVisualization = () => {\r\n    return <Paper style={{ height: '50px' }} className=\"wave-box\" />\r\n  }\r\n\r\n  componentDidMount() {\r\n    const t = setTimeout(() => {\r\n      console.log('无法录音：权限请求被忽略（超时假装手动点击了确认对话框）', 1)\r\n    }, 8000)\r\n\r\n    console.log('正在打开录音，请求麦克风权限...')\r\n    this.rec.open(\r\n      () => {\r\n        clearTimeout(t)\r\n        console.log('已打开录音，可以点击开始了', 2)\r\n        this.wave = Recorder.WaveView({ elem: '.wave-box' }) // 创建wave对象\r\n\r\n        //rec.start() 此处可以立即开始录音，但不建议这样编写，因为open是一个延迟漫长的操作，通过两次用户操作来分别调用open和start是推荐的最佳流程\r\n      },\r\n      (msg, isUserNotAllow) => {\r\n        //用户拒绝未授权或不支持\r\n        clearTimeout(t)\r\n        console.log((isUserNotAllow ? 'UserNotAllow，' : '') + '无法录音:' + msg, 1)\r\n      }\r\n    )\r\n  }\r\n\r\n  uploadFile = e => {\r\n    const formData = new FormData()\r\n    formData.append('record', e)\r\n    api.uploadAudio(formData).then(resp => {\r\n      console.log('resp', resp)\r\n    })\r\n  }\r\n\r\n  uploadFile2 = (blob, duration) => {\r\n    const formData = new FormData()\r\n    formData.append('record', blob, duration + '.mp3')\r\n    api.uploadAudio(formData).then(resp => {\r\n      console.log('resp', resp)\r\n    })\r\n  }\r\n\r\n  recStart = call => {\r\n    call ||\r\n      (call = function(msg) {\r\n        msg && console.log(msg, 1)\r\n      })\r\n    if (this.rec && Recorder.IsOpen()) {\r\n      this.rec.start()\r\n      const set = this.rec.set\r\n      console.log('录制中：' + set.type + ' ' + set.sampleRate + 'hz ' + set.bitRate + 'kbps')\r\n    } else {\r\n      call('未打开录音')\r\n    }\r\n  }\r\n\r\n  mouseDown = () => {\r\n    this.setState({ status: 'recording' })\r\n    this.recStart()\r\n    document.onmouseup = this.touchUp\r\n  }\r\n\r\n  touchUp = () => {\r\n    this.setState({ status: 'stopped' }, () => {\r\n      document.onmouseup = null\r\n    })\r\n    this.recStop()\r\n  }\r\n\r\n  touchDown = () => {\r\n    this.setState({ status: 'recording' })\r\n    this.recStart()\r\n  }\r\n\r\n  recStop() {\r\n    this.rec.stop(\r\n      (blob, duration) => {\r\n        // this.rec.close();//释放录音资源，当然可以不释放，后面可以连续调用start；但不释放时系统或浏览器会一直提示在录音，最佳操作是录完就close掉\r\n        this.uploadFile2(blob, duration)\r\n        this.setState({ src: window.URL.createObjectURL(blob) }, () => {\r\n          console.log('src', this.state.src)\r\n        })\r\n        // this.rec = null;\r\n      },\r\n      msg => {\r\n        console.log('录音失败:' + msg, 1)\r\n        // this.rec.close();//可以通过stop方法的第3个参数来自动调用close\r\n        // this.rec = null;\r\n      }\r\n    )\r\n  }\r\n\r\n  playAndStop = () => {\r\n    this.refs.audio.play()\r\n  }\r\n\r\n  render() {\r\n    const { status, src } = this.state\r\n    const recording = status === 'recording'\r\n    return (\r\n      <Container maxWidth=\"sm\">\r\n        <div>\r\n          <Button type=\"primary\" onClick={() => this.recStart()}>\r\n            New Start\r\n          </Button>\r\n          <Button type=\"primary\" onClick={() => this.recStop()}>\r\n            New Stop\r\n          </Button>\r\n        </div>\r\n        <Grid container spacing={2} className={useStyles.wrapper} alignItems={'center'}>\r\n          <Grid item xs={2}>\r\n            <Fab\r\n              variant=\"extended\"\r\n              onMouseDown={this.mouseDown}\r\n              onTouchStart={this.touchDown}\r\n              onTouchEnd={this.touchUp}\r\n              size=\"medium\"\r\n              color={recording ? 'default' : 'primary'}\r\n            >\r\n              {recording ? '松开结束' : '按住录音'}\r\n            </Fab>\r\n            {/*{recording && <CircularProgress size={24} className={useStyles.buttonProgress}/>}*/}\r\n          </Grid>\r\n          <Grid item xs={7}>\r\n            {this.renderVisualization()}\r\n          </Grid>\r\n          <Grid item xs={3}>\r\n            <Button color=\"secondary\" variant=\"contained\" onClick={this.playAndStop}>\r\n              Play\r\n            </Button>\r\n          </Grid>\r\n          <audio controls ref={'audio'} src={src} style={{ display: 'block' }} />\r\n        </Grid>\r\n        <Button\r\n          onClick={() => {\r\n            this.props.history.push('/admin/login')\r\n          }}\r\n        >\r\n          Login\r\n        </Button>\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport Button from '@material-ui/core/Button'\r\nimport CssBaseline from '@material-ui/core/CssBaseline'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport Link from '@material-ui/core/Link'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Box from '@material-ui/core/Box'\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\nimport Container from '@material-ui/core/Container'\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  )\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    paper: {\r\n      marginTop: theme.spacing(8),\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center'\r\n    },\r\n    avatar: {\r\n      margin: theme.spacing(1),\r\n      backgroundColor: theme.palette.secondary.main\r\n    },\r\n    form: {\r\n      width: '100%', // Fix IE 11 issue.\r\n      marginTop: theme.spacing(3)\r\n    },\r\n    submit: {\r\n      margin: theme.spacing(3, 0, 2)\r\n    }\r\n  })\r\n)\r\n\r\nexport default function InfoPage(props: any) {\r\n  const classes = useStyles()\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign up\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                autoComplete=\"fname\"\r\n                name=\"firstName\"\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"firstName\"\r\n                label=\"First Name\"\r\n                autoFocus\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"lastName\"\r\n                label=\"Last Name\"\r\n                name=\"lastName\"\r\n                autoComplete=\"lname\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Email Address\"\r\n                name=\"email\"\r\n                autoComplete=\"email\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                autoComplete=\"current-password\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControlLabel\r\n                control={<Checkbox value=\"allowExtraEmails\" color=\"primary\" />}\r\n                label=\"I want to receive inspiration, marketing promotions and updates via email.\"\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick={() => {\r\n              console.log('hook props', props.props)\r\n              props.props.history.push('/demo')\r\n            }}\r\n          >\r\n            Sign Up\r\n          </Button>\r\n          <Grid container justify=\"flex-end\">\r\n            <Grid item>\r\n              <Link href=\"#\" variant=\"body2\">\r\n                Already have an account? Sign in\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={5}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  )\r\n}\r\n","import React, { lazy } from 'react'\r\nimport { Redirect, Route, Switch } from 'react-router-dom'\r\nimport DemoPage from 'containers/demo'\r\nimport InfoPage from 'containers/info'\r\n\r\nconst LoginContainer = lazy(() => import('containers/login'))\r\n\r\nexport class Routes extends React.Component<any> {\r\n  render() {\r\n    return (\r\n      <>\r\n        <Switch>\r\n          <Redirect exact={true} from=\"/\" to=\"/info\" />\r\n          <Route path=\"/info\">\r\n            <InfoPage props={this.props} />\r\n          </Route>\r\n          <Route path=\"/demo\" component={DemoPage} />\r\n          <Redirect exact={true} from=\"/admin\" to=\"/admin/login\" />\r\n          <Route path=\"/admin/login\" component={LoginContainer} />\r\n          <Route path=\"/admin/dashboard\" component={LoginContainer} /> {/*todo*/}\r\n        </Switch>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Routes\r\n","import React, { Suspense } from 'react'\r\nimport { createBrowserHistory } from 'history'\r\nimport { Provider } from 'mobx-react'\r\nimport { RouterStore, syncHistoryWithStore } from 'mobx-react-router'\r\nimport RootStore from './stores/root'\r\nimport { Route, Router } from 'react-router-dom'\r\nimport Routes from './routes'\r\nimport CssBaseline from '@material-ui/core/CssBaseline'\r\n\r\nconst browserHistory = createBrowserHistory()\r\nconst routingStore = new RouterStore()\r\nconst history = syncHistoryWithStore(browserHistory, routingStore)\r\n\r\nclass App extends React.Component {\r\n  public render() {\r\n    return (\r\n      <Suspense fallback={<div>Loading...</div>}>\r\n        <CssBaseline />\r\n        <Provider {...RootStore}>\r\n          <Router history={history}>\r\n            <Route component={Routes} />\r\n          </Router>\r\n        </Provider>\r\n      </Suspense>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport './normalize.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}