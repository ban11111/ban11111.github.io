(this.webpackJsonpwc=this.webpackJsonpwc||[]).push([[0],{106:function(e,t,a){e.exports=a(143)},111:function(e,t,a){},112:function(e,t,a){},121:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),i=a(11),l=a.n(i),c=(a(111),a(112),a(24)),s=a(44),u=a(46),m=a(45),d=a(28),p=a(86),f=a(66),h=new function e(){Object(c.a)(this,e)},b=a(199),v=(a(121),a(34)),E=a.n(v),g=a(52),x=a(82),w=a(69),y=a.n(w),C=function(){var e=Object(g.a)(E.a.mark((function e(t,a){var n,r,o,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:r=e.sent,o=r.data,n={success:!!a||o.success,info:o.msg,data:a?o:o.data},e.next=15;break;case 8:if(e.prev=8,e.t0=e.catch(0),i=e.t0.response.data,403!==e.t0.response.status){e.next=14;break}return setTimeout((function(){sessionStorage.clear(),window.location.replace("/login")}),2e3),e.abrupt("return",{info:"Your login information is invalid, please login again!",success:!1});case 14:n={success:i.success,info:i.err_msg,data:i};case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),k=function e(t){var a=this;Object(c.a)(this,e),this.request=void 0,this.down=void 0,this.download=Object(g.a)(E.a.mark((function e(){var t,n,r,o=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,C((function(){return a.request.post(t,n,{responseType:"blob"})}),"down");case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),this.post=Object(g.a)(E.a.mark((function e(){var t,n,r,o=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",n=o.length>1?o[1]:void 0,e.next=4,C((function(){return a.request.post(t,n)}));case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),this.uploadAudio=function(e){return a.post("/api/upload",e)},this.request=t.http,this.down=t.down},R=(n=function(){var e={baseURL:"",headers:{"Content-Type":"application/json",Token:sessionStorage.getItem("token")}};return{http:y.a.create(e),down:y.a.create(Object(x.a)({},e,{responseType:"blob"}))}}(),new k(n)),j=a(62),S=a.n(j),O=(a(122),a(123),a(124),a(185)),T=a(89),I=a(4),W=a(193),F=a(61),N=a(60),z=a(59),A=a(88),D=a(190),q=a(198),L=a(204),B=a(186),P=a(187),U=a(192),V=a(191),M=a(203),Y=a(196),H=a(205),J=a(194),G=a(195),K=Object(O.a)((function(e){return{root:{display:"flex",alignItems:"center"},word:{fontSize:"x-large",fontFamily:"monospace",fontWeight:"bold"},wrapper:{margin:e.spacing(1),position:"relative"},buttonSuccess:{backgroundColor:F.a[500],"&:hover":{backgroundColor:F.a[700]}},fabProgress:{color:F.a[500],position:"absolute",top:-6,left:-6,zIndex:1},buttonProgress:{color:F.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})),_=Object(T.a)(D.a)({fontSize:"xxx-large",fontFamily:"cursive",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"}),Q=Object(I.a)({root:{marginTop:15,"& input:valid + fieldset":{borderColor:"green",borderWidth:2},"& input:invalid + fieldset":{borderColor:"lightBlue",borderWidth:2},"& input:valid:focus + fieldset":{borderLeftWidth:6,padding:"4px !important"}}})(q.a),X=Object(T.a)(L.a)({root:{maxWidth:400,flexGrow:1}}),Z={bitRate:128,sampleRate:16e3},$=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).rec=S()({type:"mp3",bitRate:Z.bitRate,sampleRate:Z.sampleRate,disableEnvInFix:!1,onProcess:function(e,t,a,r){n.wave.input(e[e.length-1],t,r)}}),n.renderVisualization=function(){return o.a.createElement("div",{style:{height:"50px"},className:"wave-box"})},n.timeoutFn=setTimeout((function(){console.log("\u65e0\u6cd5\u5f55\u97f3\uff1a\u6743\u9650\u8bf7\u6c42\u88ab\u5ffd\u7565\uff08\u8d85\u65f6\u5047\u88c5\u624b\u52a8\u70b9\u51fb\u4e86\u786e\u8ba4\u5bf9\u8bdd\u6846\uff09",1)}),1e4),n.uploadFile=function(e,t){var a=new FormData;a.append("record",e,t+".mp3"),R.uploadAudio(a).then((function(e){console.log("resp",e)}))},n.recStart=function(){n.rec=S()({type:"mp3",bitRate:n.state.audioConf.bitRate,sampleRate:n.state.audioConf.sampleRate,disableEnvInFix:!1,onProcess:function(e,t,a,r){n.wave.input(e[e.length-1],t,r)}}),n.rec.open((function(){clearTimeout(n.timeoutFn),n.rec.start();var e=n.rec.set;console.log("\u5f55\u5236\u4e2d\uff1a"+e.type+" "+e.sampleRate+"hz "+e.bitRate+"kbps")}),(function(e,t){clearTimeout(n.timeoutFn),console.log((t?"UserNotAllow\uff0c":"")+"\u65e0\u6cd5\u5f55\u97f3:"+e,1)}))},n.mouseDown=function(){n.setState({status:"recording"}),n.recStart(),document.onmouseup=n.touchUp},n.touchUp=function(){n.setState({status:"stopped"},(function(){document.onmouseup=null})),n.recStop(),n.translationRef.current.lastChild.firstChild.focus()},n.touchDown=function(){n.setState({status:"recording"}),n.recStart()},n.playAndStop=function(){n.refs.audio.play()},n.onClickNext=function(){n.state.wordIndex>=n.state.words.length-1||n.setState({wordIndex:n.state.wordIndex+1,reRenderTimer:!0},(function(){n.setState({reRenderTimer:!1})}))},n.onClickBack=function(){n.state.wordIndex<=0||n.setState({wordIndex:n.state.wordIndex-1,reRenderTimer:!0},(function(){n.setState({reRenderTimer:!1})}))},n.updateAudioConf=function(e,t){n.setState({audioConf:{sampleRate:e,bitRate:t}})},n.renderCountDown=function(e){return o.a.createElement(A.CountdownCircleTimer,{isPlaying:!1,duration:10,size:60,strokeWidth:8,colors:[[F.a.A200,.33],[N.a[300],.33],[z.a[500],.34]],onComplete:function(t){console.log(t,e,"on complete"),n.onClickNext()}},(function(e){var t=e.remainingTime;return o.a.createElement("div",{style:{fontSize:"xx-large"}},t)}))},n.state={rec:null,status:"init",src:"",audioConf:Z,wordIndex:0,words:["\u8981\u8bfb\u7684\u5b57","\u5b572","\u5b573","\u540e\u9762\u4f1a\u5728","\u7ba1\u7406\u9875\u9762\u5f00\u653e\u914d\u7f6e"],reRenderTimer:!1},n.translationRef=o.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("\u6b63\u5728\u6253\u5f00\u5f55\u97f3\uff0c\u8bf7\u6c42\u9ea6\u514b\u98ce\u6743\u9650..."),this.rec.open((function(){clearTimeout(e.timeoutFn),console.log("\u5df2\u6253\u5f00\u5f55\u97f3\uff0c\u53ef\u4ee5\u70b9\u51fb\u5f00\u59cb\u4e86",2),e.wave=S.a.WaveView({elem:".wave-box"}),e.rec.close()}),(function(t,a){clearTimeout(e.timeoutFn),console.log((a?"UserNotAllow\uff0c":"")+"\u65e0\u6cd5\u5f55\u97f3:"+t,1)}))}},{key:"recStop",value:function(){var e=this;this.rec.stop((function(t,a){e.rec.close(),e.uploadFile(t,a),e.setState({src:window.URL.createObjectURL(t)},(function(){console.log("src",e.state.src)}))}),(function(t){console.log("\u5f55\u97f3\u5931\u8d25:"+t,1),e.rec.close()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.status,n=t.src,r=t.words,i=t.wordIndex,l=t.audioConf,c=t.reRenderTimer,s=r[i],u="recording"===a;return o.a.createElement(B.a,{maxWidth:"sm"},o.a.createElement(P.a,{container:!0,spacing:2,className:K.wrapper,alignItems:"center"},o.a.createElement(P.a,{item:!0,xs:12,style:{display:"flex",justifyContent:"center"}},!c&&this.renderCountDown(i)),o.a.createElement(P.a,{item:!0,xs:12},o.a.createElement("div",null,o.a.createElement(_,null,s))),o.a.createElement(P.a,{item:!0,xs:2},o.a.createElement(U.a,{className:"nocopy",variant:"extended",onMouseDown:this.mouseDown,onTouchStart:this.touchDown,onTouchEnd:this.touchUp,onContextMenu:function(e){e.preventDefault()},size:"medium",color:u?"default":"primary"},u?"\u677e\u5f00\n\u7ed3\u675f":"\u6309\u4f4f\n\u5f55\u97f3")),o.a.createElement(P.a,{item:!0,xs:8},this.renderVisualization()),o.a.createElement(P.a,{item:!0,xs:2},o.a.createElement(V.a,{color:"secondary",variant:"contained",onClick:this.playAndStop,style:{float:"right"}},"Play")),o.a.createElement(P.a,{item:!0,xs:12},o.a.createElement("audio",{controls:!0,ref:"audio",src:n})),o.a.createElement(P.a,{item:!0,xs:12},o.a.createElement(Q,{ref:this.translationRef,label:"Input translation here",required:!0,fullWidth:!0,variant:"outlined",id:"validation-outlined-input"})),o.a.createElement(P.a,{item:!0,xs:12},o.a.createElement(X,{variant:"progress",steps:r.length,position:"static",activeStep:i,nextButton:o.a.createElement(V.a,{size:"small",onClick:this.onClickNext,disabled:i+1>=r.length},"Next","rtl"===W.a.direction?o.a.createElement(J.a,null):o.a.createElement(G.a,null)),backButton:o.a.createElement(V.a,{size:"small",onClick:this.onClickBack,disabled:0===i},"rtl"===W.a.direction?o.a.createElement(G.a,null):o.a.createElement(J.a,null),"Back")})),o.a.createElement(P.a,{item:!0,xs:6},o.a.createElement(M.a,null,"\u91c7\u6837\u7387"),o.a.createElement(Y.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:l.sampleRate,onChange:function(t){e.updateAudioConf(t.target.value,l.bitRate)}},o.a.createElement(H.a,{value:8e3},"8000"),o.a.createElement(H.a,{value:11025},"11025"),o.a.createElement(H.a,{value:16e3},"16000"),o.a.createElement(H.a,{value:22050},"22050"),o.a.createElement(H.a,{value:24e3},"24000"),o.a.createElement(H.a,{value:44100},"44100"),o.a.createElement(H.a,{value:48e3},"44100"),o.a.createElement(H.a,{value:5e4},"50000"),o.a.createElement(H.a,{value:96e3},"96000"))),o.a.createElement(P.a,{item:!0,xs:6},o.a.createElement(q.a,{label:"\u6bd4\u7279\u7387",type:"number",InputLabelProps:{shrink:!0},variant:"filled",value:l.bitRate,onChange:function(t){e.updateAudioConf(l.sampleRate,t.target.value)}}))))}}]),a}(r.Component),ee=a(201),te=a(181),ae=a(184),ne=a(197),re=a(87),oe=a.n(re),ie=a(146),le=a(200);function ce(){return o.a.createElement(ie.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",o.a.createElement(ae.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var se=Object(O.a)((function(e){return Object(le.a)({paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.light},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}})}));function ue(e){var t=se();return o.a.createElement(B.a,{component:"main",maxWidth:"xs"},o.a.createElement(te.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(ee.a,{className:t.avatar},o.a.createElement(oe.a,null)),o.a.createElement(ie.a,{component:"h1",variant:"h5"},"Chinese Character Reading Test"),o.a.createElement(ie.a,{component:"h3",variant:"subtitle1",style:{color:"grey"}},"Instructions: xxxx"),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(P.a,{container:!0,spacing:2},o.a.createElement(P.a,{item:!0,xs:12},o.a.createElement(q.a,{name:"name",variant:"outlined",required:!0,fullWidth:!0,id:"name",label:"Name",autoComplete:"name",autoFocus:!0})),o.a.createElement(P.a,{item:!0,xs:12},o.a.createElement(q.a,{variant:"outlined",required:!0,fullWidth:!0,id:"chineseClass",label:"Chinese Class",name:"chineseClass"})),o.a.createElement(P.a,{item:!0,xs:12},o.a.createElement(q.a,{variant:"outlined",required:!0,fullWidth:!0,id:"hksLevel",label:"HKS Level",name:"hksLevel"})),o.a.createElement(P.a,{item:!0,xs:12},o.a.createElement(q.a,{variant:"outlined",required:!0,fullWidth:!0,id:"ethnicBackground",label:"Ethnic Background",name:"ethnicBackground"})),o.a.createElement(P.a,{item:!0,xs:12},o.a.createElement(q.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"})),o.a.createElement(P.a,{item:!0,xs:12},o.a.createElement(q.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"}))),o.a.createElement(V.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){console.log("hook props",e),e.props.history.push("/demo")}},"Sign Up / Start ?"),o.a.createElement(P.a,{container:!0,justify:"flex-end"},o.a.createElement(P.a,{item:!0},o.a.createElement(ae.a,{href:"#",variant:"body2"},"Already have an account? Sign in"))))),o.a.createElement(V.a,{onClick:function(){e.props.history.push("/admin/login")}},"\u4e34\u65f6\u8f6c\u5230 \u7ba1\u7406\u5458Login \u9875\u9762"),o.a.createElement(ne.a,{mt:5},o.a.createElement(ce,null)))}var me=Object(r.lazy)((function(){return Promise.all([a.e(2),a.e(4)]).then(a.bind(null,454))})),de=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.d,null,o.a.createElement(b.a,{exact:!0,from:"/",to:"/info"}),o.a.createElement(b.b,{path:"/info"},o.a.createElement(ue,{props:this.props})),o.a.createElement(b.b,{path:"/demo",component:$}),o.a.createElement(b.a,{exact:!0,from:"/admin",to:"/admin/login"}),o.a.createElement(b.b,{path:"/admin/login",component:me}),o.a.createElement(b.b,{path:"/admin/dashboard",component:me})," "))}}]),a}(o.a.Component),pe=Object(d.a)(),fe=new f.RouterStore,he=Object(f.syncHistoryWithStore)(pe,fe),be=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement(r.Suspense,{fallback:o.a.createElement("div",null,"Loading...")},o.a.createElement(te.a,null),o.a.createElement(p.a,h,o.a.createElement(b.c,{history:he},o.a.createElement(b.b,{component:de}))))}}]),a}(o.a.Component);l.a.render(o.a.createElement(be,null),document.getElementById("root"))}},[[106,1,3]]]);
//# sourceMappingURL=main.b4e1ff23.chunk.js.map